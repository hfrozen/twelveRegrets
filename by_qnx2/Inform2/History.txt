* 2호선 TCMS 작업 내역

17/03/16
	1. 처음에 DTB 마스터/슬레이브를 정하는 방법을 바꾸었다.
		1) TC는 기동하면서 모두 슬레이브로 된다.
		2) 0호차는 1.5초, 9호차는 3초를 기다린다.
		3-1) 2항에서 기다리는 동안 어디선가 브로드 캐스팅이 날라오면 기동 때 설정한 슬레이브를 변경하지않고 동작한다.
				- 브로드 캐스팅이 오면 정해진 시간에 응답을 한다.
		3-2) 정해진 시간동안 브로드 캐스팅이 없으면 자신의 입력에서 HCR을 검사하여...
		3-2-1) HCR이 들어와있으면 마스터로 전환하여 동작한다.
		3-2-2) HCR이 없으면 슬레이브 상태에서 HCR을 기다리게 되는데 이 상태에선 TC가 전부 슬레이브라서 DTB통신은 없다
				- HCR이 들어오면 3-2-1항으로 가고 브로드 캐스팅이 오면 3-1항으로 동작한다.

	2. 후미차 ATO는 통신을 하지 않으며 DU에서는 블럭 상태로 표현된다.

	3. TUDIB_YMS(TU-DI-39)는 무시하여 운전 방식에서 "OVERLAP"이 표시되지않게 하였다,

.
.
.
.
.
17/03/29	ts:1.05,	mm:1.04
	1. Control & Monitor를 전반부(브로드 캐스트 송수신 때)와 후반부(DTB 송수신 완료 때)로 나누어 하던 것을
		송수신 완료 때로 합쳤다.
	2. 진행 방향 전환에서 전원 투입 때와 HCR/TCR 전환 때, 같은 방법을 사용하였으나 그렇게 하니 HCR/TCR전환 때
		ID오류가 간간히 발생하여 DTB가 불안해진다.
		그래서 두 가지 경우에 각각의 방법을 사용하였다.
	3. DTB 설정 완료 초기에서 11~20번 고장이 뜨는 버그를 잡았다.
		- 그러나 슬레이브 TC-LIU2에서는 나오는데 아마 시간 차이인 것 같다. LIU2이므로 DU에 표현되지는 않는다.
	4. 고장 기록이나 운행 기록을 저장할 때 더미가 생기는 버그를 잡았다.
		오늘 날짜를 잘 기억해놓고 지상 분석 장치에서 더미가 생기는 기록의 날짜를 점검할 필요가 있다.
	5. 시간 설정에서
		X5-1. DU화면을 통한 사용자의 시간 설정은 즉시 이루어지며 초 단위는0으로 설정,
		X5-2. 방향 전환을 통한 시간 설정은 즉시 이루어지지 않고 마스터의 초 단위가 0으로 될 때 설정되도록 수정하였다.
			이는 기본인데 마스터의 초 단위를 무시하고 설정하면 마스터가 59초일 때 다시 0으로 설정되므로 1분 가까이가 없어지는데
			방향 전환이 자주 이루어지다보면 시간이 늦어지게된다.
		* 초단위까지 설정이 되므로 구분이 5-1,2항목은 취소한다. 대신에 5-1에서는 초를 강제로 0으로 설정한다.
	6. TC에서 LIU1이 한번 다운되면 자꾸 리셋이 걸리는 것을 다운되기 전에 watchdog을 disable하도록 수정하였다.
	7. 이는 이전에 수정한건데...
		CU 패널 vfd에서 "run0"라고 0이라는 숫자가 나오는데 이 숫자는 리셋이 걸리면 증가하였다가(최대 9까지) 전원이 재 투입되면
		0으로 되므로 열차에서 한번씩 관측할 필요가 있다.

17/03/30
	1. TC9 LIU2가 전원 투입 상황에서 이상 동작을 하는 것은 이러하다.
		- TC나 CC는 각 타임 베이스 프로세스를 가지고있는데 DTB통신, 로컬 50ms통신, 로컬 100ms통신등..
		주로 디바이스들을 시간대별로 할당하여 통신을 하고 있는 것을 말한다.
		어찌되었든 ts는 10ms 인터벌로 이것들을 처리하는데 특히 TC는 웬일인지 열차 방향을 정한 후 특별히 많은 시간이 소모되어
		10ms인터벌이 순간적으로 깨어지게된다. 이때 워치독 트리거를 하지 못하게 되어 크로스 와치독이 오버플로우 되고
		당연히 LIU2는 LIU1이 다운되었다고 판단하고 메인이 되어버린다. 그러나 실제 LIU1이 다운된 것은 아니므로 DTB 버스상에서
		충돌이 일어나 버스가 어지럽게 되어 혼란이 생겨버린다.
		- 전원 투입에서 특별히 많은 시간이 소모되는 까닭을 찾는 것은 조금은 지루한 시간이 필요하므로 우선 워치독 시간을 500ms에서
		1000ms로 늘여(CC는 아니고 TC만) 이를 해결한다.
	2. 진행 방향 전환에서 DU 리셋이 잘 안되던 문제를 수정하였다.
		- 더불어 보기 싫다던 점들도 치웠다.
	3. 정확하다고는 할 수 없는데 시간이 하루 약 10분 정도 느린 것같다. 원인을 빨리 찾아야할 듯...

17/04/04
	1. DU에서 CC 출력들이 제대로 표현되지 않는 것을 수정하였다.(수정 전에도 CC의 실제 출력에는 문제없었다.)
	2. CMK 감시하는 기간을 1초에서 3초로 수정하였다. 실제로 CMK 출력(UDOB_CMK)이 나가고 1.5초 후에 피드백(CUDIB_CMK)이 들어온다.
	3. 연장 급전 중에 선두 차를 전환하면 연장 급전이 지속되지 않았는데 수정하였다.
	4. 운행/고장 기록 받기에서 시간이 많이 걸리는 문제에 있어...
		1) RTD 운행 기록으로 부터 496바이트씩 업로드 받아 USB에 저장한다는 절차가...
		2) 그리하여 후에는 TC가 가진 기록과 RTD가 가진 기록을 비교(용량 정도..)하여 같으면 TC가 가진 기록으로 USB에 저장하도록 하고
			그렇지 않으면 다소 시간이 걸리더라도 1)의 절차를 통해 RTD의 기록을 받아 USB로 저장하도록 한다.
		3) TC에 저장된 기록을 USB로 옮기는데는 496바이트라는 경계가 필요없어지며, mm 스스로 sd 스토리지에서 usb 스토리지로 옮긴다.
			TC는 단지 %만 표현할 뿐이므로 당연히 빠르게 된다.(7호선 처럼...)
		- 지금은 RTD가 완성되지 않았으므로(나의 더딤으로 인해...) 모두 TC의 기록을 USB로 저장하는 것으로 한다.
		* 위와 같은 절차에서 중대한 문제는 mm이 기록을 옮기는 동안 ts가 보내는 운행 기록 저장 명령등을 받을 수 없다는데 있다.
			그리되면 liu1이 다운로드 하는 동안 rtd는 liu2의 운행 기록 저장 명령을 받아 기록을 추가하게 되어 TC liu1과 RTD의 운행 기록은
			같지 않게된다, 그러면 2)의 다소 시간이 걸리는 절차를 통하게 되어 틀린 건 아니지만 절차의 기준 또는 정의가 모호해져 버린다.
			뭔가 해소되어야 한다...
		- mm에 스레드를 추가한다. 글로 적으니 간단하다. 스레드 동기가 중요하다.
		4) 3.과 마찬가지로 다운로드 중 선두 차를 전환하면 다운로드는 취소된다.
			mm은 방향이 바뀌는 것은 상관하지 않는다. 그래서 취소가 중요하다.

17/04/04
	1. 운전실 전환에서 DU화면상 디바이스들이 블럭으로 표시되는 것을 수정하였다.
		- DU는 tc로부터 reset을 받으면 500번지부터 지운다. 500번지 전의 것은 head, service등의 화면이다.
		- ts는 기동이나 운전실 전환에서 처음 3초 동안은 service화면을 보내지 않는다.
	2. 시간 설정은 전원 투입 기동 때, 한번만 한다.
	3. 운행 기록 새 파일을 만드는 것이 시간 설정 후에 하도록 되어있는 것을 전원 투입 기동이나 운전실 전환에서 직접 하도록 수정하였다.

17/04/06
	1. 운행 기록을 다운로드하는 동안 운행 정보나 고장 기록이 저장되도록 수정하였다.
	2. 마스터 컨트롤러 표시 출력(%)을 전수 검사 시트에 맞추어 수정하였다. - (EB 표시)
	3. HCR이 없으면 제어가 안되던 것을 수정하였다.(CM 제어 가능)
	4. TUDIB_DLCS입력을 B접점으로 수정하였다.
	5. TUDIB_PBR은 선두 차, 후미 차 모두 적용하였다.
	6. 운전실 교체 때 TC측 출력이 모두 차단되는 것을 거리 출력 하나만 차단되도록 수정하였다.

17/04/10
	1. TUDIB_IES를 B접점으로 수정하였다.
	2. TUDIB_MRPS를 B접점으로 수정하였다.
	3. TUDIB_PSDC를 B접점으로 수정하였다.
	4. HCR,TCR이 모두 OFF되면서 TUDIB_EBSLR만 뜨는 상황이 생기는데 이럴 때는 내부의 EB상황을 검사하지 않고
		DU의 EB램프만 점등한다.

17/04/13
	1. HCR이 없으면 마스터 컨트롤러를 무시한다. coast로 둔다.
	2. HVAC로 주는 외부 온도와 내부 온도에 버그가 있던 것을 수정하였다.
	3. 디바이스와의 통신에서 동기 펄스(0x7e)를 최대로 수정하였다.
	4. 출입문 통신에 있어 좌우를 바꾸었는데 바꾸고 보니 원래했던 것이었다.
	5. 처음 전원 투입에서 SIV가 제대로 동작하는데 시간이 7초 정도 걸린다 하여 CMSB동작도 그 후에 하도록 하였는데
		수정 후 해보니 TCMS가 CMSB를 동작시키는 시간이 7초보다 더 걸린다. 한 8-9초 정도...
.
.
.

17/05/23
	1. 램프와 HVAC 제어를 후미차에서도 가능하도록 수정하였다.(태그 표시됨)
	2. 자체검사 화면에 DCU의 dlt비트를 설정할 수 있는 단추를 마련하였다.
	3. 비상 모드에서는 ATO통신이 수행되지 않도록 수정하였다.
	4. 상태 정보 -	제동 장치 화면에서 "BC압력"값이 보안 제동이 아닐 때는 ECU의 bcp값을 표현하고
	    			보안 제동일 때는 두번째 아날로그 입력 값을 환산하여 표시하도록 수정하였다.
	5. DU의 단추들을 모두 수정하였다.
	6. TC버전:2.00, DU버전:2.00류
	7. TUDIB_HBR(20) 추가하였다.
	8. TUDIB_POWERING과 TUDIB_HBR이 3초이상 같이 들어오면 "HOLD BRAKE 해제 불량"-108/중고장이 표시된다.
	9. 운행기록에 각 객차 ECU의 SD TEXT1(ref, 10byte)을 추가하였다.

17/05/31	- TS ver.	2.01
	1. HVAC 제어를 선두와 후부에서 하도록 하였는데 후부에서 안되는 버그가 있어 수정하였다.

17/06/07	- TS ver.	2.02
	1. 운행 기록에 역간 거리를 추가하였다. - 운행 기록 버전:1.02
	2. 882-"PSD 연동 출입문 인터록 개방" 메시지가 TUDIB_DIAPDC(DI-15)가 꺼질 때 뜨는 것을
		TUDIB_DIR(DI-7)이 켜지고 TUDIB_DIAPDC(DI-15)가 꺼질 때 뜨도록 수정하였다.

17/06/12	- TS ver.	2.03
	* 첨부되는 내용은 17/06/07에 붙이고 오늘 날짜로는 추가하지 말 것.
	가. 방송 장치 소스를 가만히 보다보니 백업을 넘기는 부분에 있어 참고 변수가 DTB에서 유래되는 것이 아니라
		장치에서만 참조되는 변수로만 제어된다. 이리되면 앞뒤 운전실에서 통일된 제어가 나올 수가 없다. 혹 이리하여
		저번 사진같은 버그가 나오는 것은 아닐까?? - 물론 수정하여 본다.
		- 그러나 방송 장치는 앞뒤 운전실에서만 검사하는데 이 또한 각 장치의 DTB내용으로서 수행함으로 위의 의심은 타당하지 않다.
	* !!! 주의: 앞으로도 번호가 붙지않고 한글로 인덱스를 다는 부분은 팀 내부만 참조하고 밖으로는 내보내지 말 것!!!
	1. 오류 번호 721(방송 장치 통신 불능), 838(표시기 장치 통신 불능), 756(열차 무선 장치 통신 불능) 추가하여
		해당 장치의 통신 오류가 10회 이상이면 경고장으로 표시하고 백업을 넘기도록 수정하였다.
	2. 운행 기록에서 ecu 아날로그 값을 모으는데 버그가 있어 모든 ecu를 모으지 못하던 것을 수정하였다.

17/06/21
	1. 운행 일지에 항목 추가..(oblige, 제어 명령, 역간 거리 등...)
	2. ATO에 주는 총 중량 값이 overflow되어 100을 뺀 값으로 수정하였다.(100 ~ 610t, 610을 초과하면 610에 고정)
	3. ATO, PIS, ECU가 전원 투입 후 통신을 개시하기까지 어느 정도의 시간이 소모되므로 적당한 대기 시간을 주도록 하였다.
	4. DU에서 고장 코드가 겹쳐져 표시되는 문제를 없애기위해 DU script를 추가하였다.
	5, DU 통신 상태 화면에서 서비스 장치 카운터의 위치가 맞지않는 것을 수정하였다.

17/06/26	- TS ver.	2.04
	1. 301, 302, 304등의 고장이 뜨는 것은 DTB통신이 한번씩 끊어져서 그럴 수 있다고 여겨지고 그 프로세스들을 DTB통신이
		원할할 때 수행되도록 수정하고 DTB 디바운스 횟수를 3회에서 5회로 조정하였다.
	2. DTB통신 상태를 운행 일지에 추가하였다.
	가. HCR/TCR이 없을 때 메인이 다운되면 보조가 바로 슬레이브 상태로 들어가던 것을 수정하였다.
	나. 서비스 장치 제어 전환에 있어...
		1) 지금 현상은 선두나 후미쪽에 제어 문자가 일치되지 않는데 있다.
		2) 시물레이터에서는 그런 현상을 표출하기가 어렵다. 어려운게 아니라 원인을 파악하지 못하니 하질 못한다.
		3) 유추되는 것은 각 서비스 장치의 상태를 나타내는 변수는 DOZEN에 있는데 그를 바탕으로 판단하는 것은
			선두, 후미차가 따로 하는 것이 지금의 상태인데, 이것은 현재 나타나는 버그를 떠나 제어나 관측에 있어
			선두차가 판단을 해야하는 원칙에 좀 어긋난다고 할 수 있다.
		4) 그래서 버그에 대한 원인을 정확하게 할 수 없는 지금에서는 위 3)항의 문제부터 해결하고 다시 상태를 지켜보기로 한다.
		5) 3)항에 선두차가 판단을 하는 변수는 운행 일지에 남겨둔다.

17/06/30
	1. 램프나 공조기 제어를 후미차에서도 할 수 있도록 하였는데 후미차의 DTB 통신 상태를 검사하지않고 하다보니
		통신이 안될 때 DC 램프 스위치가 꺼졌다고 보고 반응하는 경우가 생겨 DTB 통신이 정상일 때 스위치 상태를
		검사하도록 수정하였다.
	2. TC0, CC5, TC9의 DTB 상태와 상관없이 연장 급전 동작을 하다보니 잘못되는 경우도 발생하여 DTB 통신이
		원할할 때 연장 급전 프로세스를 진행하도록 수정하였다. (CC2, CC6-ESK 객차는 유보)
	3. 연장 급전(ESK 투입) 때 각 SIV객차의 DTB 통신이 3초 이상 끊어진 상태면 ESK출력을 해제한다.
		DU에는 "437-TCN 통신 이상으로 연장 급전 해제" 문자 출력.
	4. ESK 투입 때 마스터의 브로드캐스트가 없는 상태로 3초 이상 유지되면 각 객차는 CM 구동을 위해 단독 프로세스를
		실행하는데 이때 ESK 객차에서는 ESK가 투입되었는지 검사하여 투입되어있으면 해제한다.

17/07/03
	가. 근 일년을 끌어오던 문제가 있었는데... DTB 초기 통신에서 이해가 되지않는 블럭이 뜨던 증상에 있어...
		a. float id 1을 가진 tu가 자신의 응답 시간에 응답하지 않고 id 3 이나 id 2 시간에서 응답하다가 자신의 시간으로 돌아간다.
		b. 원인을 찾아보니 처음 설계에서는 hcr이 있던, 없던 cid 0이 float id 0이 되고 나머지도 그 순서대로 하도록 하였다가
			hcr을 찾기 전까지는 통신을 하지 않도록 하다보니 처음 설정에서 float id를 (0, 1을 제외한) 2-3-2-3의 순서대로
			할 수 밖에 없었다. 그러다 보니 응답 시간도 그 아이디에 따라 설정이 먼저되고,
			처음 2를 가진 유닛이 마스터가 되어 브로드캐스트를 하더라도 다음 3을 가진 유닛은 미처 1로 설정되지 못하고 응답하다보니
			마지막 3을 가진 유닛과 응답 시간이 겹치게 된다. 그래서 응답 블럭이 충돌하였다.
		c. 브로드 캐스트가 있더라도 슬레이브는 바로 응답하지 않고 ModifyDtb()를 수행한 다음(그러면 id가 확실히 정해진다.)
			응답하도록 한다.
			이렇게하니 처음에는 위 증상이 안나타났는데 자꾸 해보니 한 두번 정도 발생한다. 이건 또 뭔지...

17/07/06	- TS ver.	2.05
	1. 선두차와 후미차가 거리 계산에서 차이가 나던 것을 수정하였다.
	2. DTB 통신 오류 카운터 자리가 맞지 않던 것을 수정하였다.
	3. 양쪽 모두 HCR이 들어와 있으면 LIU2끼리 충돌하는 문제가 있는데 수정하였다.
	가. B 접점 문제가 자주 뜨고 ECU 통신 고장도 뜨는 문제가 있었는데 소스에서 잘못된 점이 있었다.
		CPaper::Repair에서 수리할 때...
		이렇게 하고 있던 것을	--->	memcpy(c_pallets[PI_CURR].pDoz, c_pallets[PI_BKUP].pDoz, sizeof(RECIP));
		이렇게 하여야 한다.		--->	memcpy(&c_pallets[PI_CURR].pDoz->recip[n], &c_pallets[PI_BKUP].pDoz->recip[n], sizeof(RECIP));

17/07/07
	1. DU 상단에 화재 램프가 들어오지 않는 것을 수정하였다.

17/07/08	- TS ver.	2.06
	1. 양쪽 LIU2가 순서를 제대로 잡지못하는 버그가 있었는데 수정하였다.
	2. 서비스 장치 표시에서 백업이 넘어가면 고장으로 표시하고 "백업 해제" 단추를 추가하였다.
	가. CAREER 보정에 대하여...
		가-1. 보정은 CSteer에서 속도 0을 감지할 때 시작한다.
		가-2. 누적 거리는 FID_HEAD를 기준으로하여 5m이상 차이가 나면 보정한다.
		가-3. 소비 전력과 회생 전력은 FID_HEAD와 FID_TAIL 둘 중에서 100w이상 차이가 나면 큰 쪽으로 보정한다.
	3. cm 가동율을 추가하였다
	나. cm 가동 시간은 CM 가동 중일 때 DOZ에 정보를 싣게되며 FID_HEAD를 기준으로 보정한다.

17/07/10	- TS ver.	2.07
	1. 배터리 전압이 선로 길이로 인해 약 4V정도 drop되어서 보정하였다.
	2. DU 출입문 방향 표시가 0호차나 9호차 방향이 다 똑같이 되어있어 9호차 기준일 때는 왼쪽, 오른쪽이 바뀌도록 하였다.
		DU ver.	2.03

17/07/12	- TS ver.	2.08
	1. "백업 해제"하면 721,838 - 오류 코드도 사라진다.
	2. DCU TEXT 3.7, 3.6 오류 코드 추가.
	3. 997, 998 오류 코드 내용 수정.

17/07/14	- TS ver.	2.09
	1. 운전실 교환 때 DC, AC 램프가 꺼졌다가 다시 켜지는 현상이 있어 수정하였다.
	2. 차상 시험은 시물레이터로서 완료하였다.
	3. 온도 설정은 18~28 사이로 한다.

17/07/17	- TS ver.	2.10
	가. DTB에서 어드레스만 검사하던 것을 dwOrder까지 검사한다.
	1. ECU 오류 323을 HCR에 마스크 시킨다.
	2. CUDIB_BCCS(CCDI_13), CUDIB_ASCS(CCDI_14) 동작을 수정하였다.
		a. DI = 1 (led on)	-> 녹색 바탕 "정상"
		b. DI = 0 (led off)	-> 적색 바탕 "CUT"
	3. TCDI_20 -> TUDIB_PANUP, 상태 메시지 439 "판토 상승 스위치 감지" 추가.
	4. TCDI_21 -> TUDIB_PANDN, 상태 메시지 440 "판토 하강 스위치 감지" 추가.
	5. CCDI_42 -> CUDIB_IPDR,  상태 메시지 441 "개별 판토 하강 스위치 감지" (2, 4, 8호차) 추가.

17/07/26	- TS ver.	2.11
			- DU ver.	2.04
	1. VVVF 차상 시험에서 "보안 제동을 체결하시오" -> "보안 제동을 체결하고 주차 제동을 완해하시오."
	2. DCU SDR에 시간이 들어가지 않던 버그를 수정하였다.
	3. ATO SDR이 모두 0이 되던 것을 수정하였다.
	4. HVAC SDR에서 온도 설정 valid 비트를 사용자가 설정한 다음 3초간만 1이 되던 것을 항상 1로 유지하도록 수정하였다.
	5. 누적 거리 저장은 속도 0이 감지된 후 저장되도록 수정하였다.

17/07/27	- TS ver.	2.12
	1. 화재 표시 다이얼로그가 나타나고 사라질 때 그 전 화면이 나타나도록 수정하였다
		차상 시험 중이나 다운로드 중일 때 화재가 감지되어도 표시 다이얼로그는 나타나지 않는데
		화재 표시 시퀀스는 감지를 인식하고 진행 사용자의 선택을 기다리는 동작이 되어서 시험이나 다운로드가 끝나면
		표시 다이얼로그가 나타나게 된다.(화재 감지가 사라져도 이렇게 된다)
		이런 시퀀스를 무시할 수도 있으나 현재로서는 나타나는 쪽과 안 나타나는 쪽, 어느 게 더 현명한 방법인지 알 수가 없어
		미루어 둔다.
	2. 연장 급전에서 아래와 같이 수정하였다.
		esk0이 붙으면 0호차에서 5호차까지는 HVAC 부하 반감을 하고(lrr = 1) 6,7,8,9호차는 부하 반감을 하지 않는다.
		esk1이 붙으면 0,1,2호차는 부하 반감을 하지 않고 3호차에서 9호차까지 부하 반감을 한다.
		* esk0, esk1이 같이 붙으면 부하 반감을 하지 않고 부하 차단을 한다.(lor = 1)-이전과 동일하다.
	3. 차종별 중량 수정.
	가. 마스터 카를 바꾸면 속도 0이 감지되지 않는 버그를 수정하였다.

17/07/29
	1. 연장 급전에서 esk를 붙이기 전에 부하 차단을 먼저하게되는데 이때 모든 객차에게 부하 차단을 하던 것을 부하 반감과
		마찬가지로 esk의 위치에 따라 해당 객차에게만 부하 차단을 한다.
	2. ECU anti-skid 시험 시간을 1분 30초로 수정하였다.
	3. 객차 중량 수정.

17/07/31	- TS ver.	2.14
			- MM ver.	2.11
	1. SIV 시험에서 sd text 1.3(vok)과 1.5(fok)를 and해서 결과를 도출하여야 하는데 or하고 있던 버그를 수정하였다.
	2. 연장 급전에서 HVAC sdr text 1.6(esk)비트도 lrr, lor과 같이 객차 번호에 따라 출력한다.
	3. SIV sd text 14를 배터리 전압으로 하였으나 적용하지는 않았다.
	가. mm이 다운되면 ts도 같이 다운되어 liu2로 백업이 넘어가도록 하였으나 언젠지는 모르겠는데 수정하다가
		이 프로세스가 동작되지 않고있었다. 동작 되도록 수정하였다.

17/8/04		- TS ver.	2.15
			- mm ver.	2.12
	1. mm이 주기적인 쓰기를 할 때 플래그를 두어 끝나기를 기다리도록 하였는데. 이전 버전에서 지웠다.
		지우고 보니 주기적인 쓰기를 할 때 버퍼가 오버라이트 되는 것같은 오류 문자열이 시작에서 한번 씩 나타나
		다시 기다리도록 하고 최대 10회까지 기다렸다가 상태가 지속되면 다운되도록 하였다.
	2. 정지 때 거리나 전력을 선두차나 큰 쪽을 기준으로 복사하였으나 LIU2로 백업이 되었던 상태라면 이렇게 하는 것은 틀린다.
		4대의 TC 중에서 무조건 값이 제일 큰 쪽을 기준으로하여 복사한다.

17/08/07
	가. mm의 주기적인 활동에서 지연이 생기면 콘솔로 알리도록 하였다. (mm이 다운되는지 검사)
	나. 수동 모드 (initiative mode)는 일단 취소한다. (du 화면에도 보이지 않게 하였다.)
	1. 선두차가 바뀔 때 준비 시간을 10초로 하였으나 너무 긴게 아닌가 여겨져 2초로 줄이고, (현재 김천에서 예비 주행을 할 때를 생각해보면...)
		각 CC 디바이스의 처음 응답 시간을 TC 디바이스 응답 시간처럼 따로 두어 관리한다.
		따로 두어 관리하고 있으나 시간이 HVAC를 제외하곤 0이라서 5초로 한다.

17/08/09	- MM ver. 2.13
	1. mm version도 표시하도록 하였다.
	2. align old trouble은 일단 동작하지 않도록 하였다. 다른 방법을 찾아야한다.
	3. 전력 계산에 있어 샘플링 단위 0.05(50ms)를 0.1(100ms)로 수정하였다
	4. 5호차 배터리 전압이 표현되도록 수정하였다.

17/08/17	- TS ver.	2.16
	가. liu2가 방향을 못잡고 흔들리는 상황 개선. - 17/07/08 수정 사항이 이상하다.
		- ChangeOblige()라는 함수를 끼워넣었던데 .. 지워버림..
	나. 처음에 파일을 읽어오는 것이 있는데 운행 기록 파일이나 고장 내역 파일과 디렉토리가 같아 충돌이 일어나는 현상으로 보임.
		- 처음 파일의 디렉토리를 "h/m"으로 수정.
	1. DU VVVF 상태 화면에서 FC 전압을 4자리로 수정.
	2. V3F trace data size 수정.
	다. 처음 시작에서 mm이 다운되는 것은 mm이 이상해서 그런 것이 아니라 ts에서 mm을 너무 빨리 호출하기 때문에 생긴 일이다.
		mm이 파일 핸들링을 할 때 조금 지연되기도 하는데 그래도 100~300ms 정도로 마칠 수 있는 일이므로 ts는 100ms씩 접근한다고 보고
		카운터 값을 10으로 하였는데, ts가 어처구니 없는 속도로 mm에 접근하니 실제 시간은 그렇게 지나지 않았는데 카운터 값만 보고
		mm이 다운되었다고 판단한다.
		원인을 찾아보니 시스템 기동에서 mqueue에서 전달 지연이 생기는 것같고 그로인해 버스 종료 메시지가 밀렸다가 한꺼번에
		전달되어 종료 함수를 시간 지연 없이 계속 실행하게 되어 이 함수가 100ms 인터벌로 호출된다는 설계 의도가 틀어졌다.

17/08/21	- TS ver.	2.17
			- MM ver.	2.15
	가. 초기에 environs, careers, cmjog 파일들은 mm이 읽어서 pBulk->m[BPID_OCCASN].bt.c[0], c[100], c[300]에 올려놓는다.
		ts는 위의 것을 참조한다.
		방향 전환에서는 DTB를 OFF할 때 AIDCMD_LOADGROUND를 mm에 주어 미리 위의 파일들을 올려놓도록한다.
		environs파일을 쓰는 것은 사용자의 요구에의해 아무 때나 쓰게되지만 BPID_OCCASN 패스를 통해 mm이 저장한다.
		careers, cmjog파일은 운행 기록에 그 형식이 들어가있으므로 운행 정보를 기록할 때 그 부분을 따로 발췌해서 저장한다.
		- sd에 읽고 쓰는 순간을 중복시키지 않기위하여 이렇게한다.

17/08/22
	가. 방향 전환에 있어 LIU2가 이상이 있던 점에 대해..비단 LIU2의 문제는 아니지만
		- 마스터는 방향 전환이 감지되면 방향 전환 비트를(gcmd.b.mcd)를 전송한다.
		- 슬레이브는 이를 감지하고 변수(c_reversal)를 이용하여 디바운스를 한다.
		- 이 디바운스 횟수가 마스터나 슬레이브나 다같이 5회이고보니 슬레이브에서 브로드캐스팅 한 프레임만 놓쳐도 디바운스를 끝내지 못하게 된다.
		- 마스터는 자기 횟수를 헤아리고 방향 전환을 실시한다.
		- 이때 디바운스를 끝내지 못한 슬레이브는 방향 전환에 실패하고 방향 전환에 성공한 다른 디바이스와 전송 프레임이 겹치게된다.
		- 해결은 슬레이브의 디바운스는 3회, 마스터의 디바운스는 6회로 하여 마스터의 브로드캐스트 횟수를 두배로 하여 한 두 프레임을 놓쳐도
			슬레이브의 디바운스는 끝내게 한다.
	1. 속도 검출에 있어 속도가 한번씩 들쑥날쑥했는데 FPGA에서 tacho 펄스를 읽어들이는 부분에 문제가 있어 수정하였다.
	2. note파일을 기록하지 않도록 수정하였다.(실행에 지장을 준다)

17/08/30	- TS ver.	2.18
			- MM ver.	2.16
	1. SIV TRACE 추가.
	2. 고장 기록 부분 수정
		- tc가 고장 기록들을 DU에 전달하였으나 발생 기록과 소거 기록을 DU에 전송하면 DU가 따로 관리하여 상태 정보, 고장 정보, 고장 기록등을
		관리하도록 한다. DU엔 SD메모리가 필요하게되었다.

17/09/04	- TS ver.	2.19
			- MM ver.	2.17
	1. DU 리셋 절차가 문제가 있어 수정.
		리셋 바이트에 계속 1을 주는 것이 아니라 0으로 지우고 다시 1로 하였을 때 재 리셋이 실행된다.
	2. DU. 스크립트에서 고장 기록에 버그가 있던 것을 수정.
	3. DU에서 느려지는 이유를 정확히 찾지는 못했지만 제조사의 권유에 따라...
		1) DU 화면에서 바탕색이 투명인 것을 모두 수정.
		2) 단추 색깔도 단순하게 수정.
	4. 트레이스 취합 시 마지막 16개만 남기는 코드에서 버그가 있던 것을 수정.
	5. VVVF HB, LB 카운터 추가

17/09/05
	1. ATO로 보내는 편성 번호가 little-endian(LSB-MSB)으로 되어있던 것을 big-endian(MSB-LSB)로 수정.
	2. trouble code 100, 323은 기동 후 10초 동안 감지하지 않도록 수정.

17/09/06	- TS ver.	2.20 -> 2.21
	1. ATO, 서비스 장치 통신 디바운스를 30회로 수정.
	2. ecu를 제외한 local 장치 통신 디바운스를 20회로 수정.
	3. hcr 투입 후 3초 동안 ecu 323 검사하지 않음.
	가. SIV 고장 코드 407~426, 429들은 3회 디바운스를 하도록 수정.

17/09/07	- TS ver.	2.22
			- DU ver.	2.07
	1. DU 추진 장치 상태 쪽 FC 막대 그래프 수정
	가. PA 고장 코드 791~709, 719들은 3회 디바운스를 하도록 수정.

17/09/11	- TS ver.	2.23
			- MM ver.	2.18
			- DU ver.	2.08
	1. DU 출고전 검사를 운행 로그인 화면으로 수정.
	2. 고장 기록에서 이전 고장들이 지워지지 않던 버그 수정.
	가. 이전 거리와 전력 기록이 지워지는 버그에 대해...
		- 0.5초 마다 운행 기록과 함께 거리/전력 정보를 기록하는데 현재 생각으로 가장 우려스러운 것은
		메모리 쓰기를 할 때 완전히 끝나지 않은 쓰기가 있는데 전원이 꺼지는 경우를 생각해볼 수 있다.
		- 우선 운행 기록을 쓸 때 블록마다 체크섬을 둔다.
		- 거리 / 전력을 따로 기록하지 않고 전원 투입시 마지막 로그 마지막 블록에서 체크섬을 검사하고
		괜찮은 블록에서 거리 / 전력 기록을 가져온다.
	3. 거리 기록과 전력 기록이 한번씩 지워지는 문제에 대해...
		- 거리 / 전력 기록을 따로 남기지 않고 운행 기록에 체크섬을 두어 전원 투입 후 마지막 운행 기록 블럭에서
		체크섬이 맞는 블럭을 찾아 거기서 거리 기록과 전력 기록을 찾아서 설정한다.
		- 운행 중 운행 기록 쓰기 도중에 전원이 차단되어 해당 운행 기록 블럭이 완전히 쓰여지지 않았다면
		체크섬에서 오류가 있을 것이므로 나중에 전원 투입 후 위의 방법을 통해 참조되지 않는다.
	나. 가.항 수정 후 생긴 환경 파일 설정 오류는 EnvironsToDefault함수를 생성자에서도 부르면서 다운되는 것은 수정.
		- 환경 파일의 버전과 시간을 적지않으면 데이터가 한 바이트씩 시프트되는 현상은...
	다. TC9 liu2에서만 siv trace가 포착되는 버그는 CorralSivDetect함수에서 받은 프레임이 아니라 이전 프레임을
		가지고 실행하여 실제 남긴 트레이스 파일에서는 파악할 수 없었다. 그런데...
		a. 그럼 이전 프레임에서는 SD에 에러 비트가 발생하였는가?
		b. 발생하였다면 liu1에서도 트레이스 파일이 있어야하는데 전혀 없다.
		c. 유추한다면 tc9 liu2에서 crc 검사가 안되고있는 것 뿐인데...
	라. 3.번으로 수정하고 /h/sd/care, /h/sd/cmj 파일을 지우려고 무던히 시도하였는데... 잘 안되어서...
		- 메뉴얼로 지워도 바로 생성이 된다.
		- 그러나 모든 문제를 해결하고 아무런 수정없이 다시 컴파일하여 실행하니 별 문제가 없다.
		- 밤샌 내가 미친건가..???

17/09/17	- TS ver.	2.26
			- MM ver.	2.20
			- MC ver.	1.02
			- DU ver.	2.09
	1. CMK feedback time(UDOB_CMK -> CUDIB_CMK)을 3초에서 6초로 늘임.
	2. ATO warmup time을 5초 더 연장.
	가. ECU 통신 검사 디바운스 10회 추가.
	3. DU의 출입문 상태 그림 바꿈.
	나. 디버그 인터페이스 (각 통신 채널의 수신 버퍼 보기) 추가.

17/09/20
	1. ATO SDR TEXT6.5, 6.6, 6.7 수정

17/09/22	- ver. 2.27
	1. 9호차 출입문은 뒤집어 표시되는데 통신 상태는 그렇게 되지 않던 버그 수정
	가. 고장 코드 38, 39, 40 삭제
	2. TUDIB_ENCF -> 고장 코드 37, "엔코더 고장 감지" 추가.

17/09/28	- ver 2.28
	1. VVVF 차상 시험에서 "보안 제동을 체결하고 주차 제동을 완해하시오."를
	"보안 제동을 체결하시오.", "주차 제동을 완해하시오."로 수정.
	2. hdlc 통신 7E를 8개에서 5개로 수정.

17/09/29	- TS ver. 2.29
			- DU ver. 2.10
	1. DU - zero speed 감지 후 매 2초 마다 고장 기록이 변하면 USB에 저장되도록 수정.
	2. CDMA 전송 데이터 수정 또는 추가.
		- 승차율을 처음엔 ASP로 구하려다가 LW로 바뀌었는데 CDMA에서는 적용이 바로 되지않았다.
		- SIV ES 추가.
		- 데이터 끝에 0x5a37을 추가하여 이전 데이터와 구별하도록 한다.
	3. DU에 정보를 보낼 때 이전 데이터와 비교하여 틀린 부분만 보내도록 하였는데,
		DU에서 고장 정보에 대한 스크립트를 처리하도록 해놓고 보니 DU가 정보를 놓치는 경우가 생기는 것 같아
		무조건 다 보내도록 하였다.

17/10/17	- TS ver. 2.30
			- DU ver. 2.11
	1. DU - 고장 정보 화면이 변하지 않는 버그와 소거 시간이 나타나지 않는 버그 수정.

17/10/19
	1. ATO에서 수신되는 열차 번호가 0이면 이전 열차 번호를 유지한다. 열차 번호 초기 값은 "1111"이다.
	2. 출입문 표시 수정. - 통신 -> 비상 핸들 -> 바이패스 -> 장애물 감지 -> 중고장 -> 고장 순으로 "X"로 표시한다.
	3. CC가 동작하지 않으면 해당차에 출입문 바이패스가 표시되던 버그 수정.
	4. CC 시작할 때 몇가지 오류가 뜨는 버그 수정.
	가. ECU SA TEXT 23,24에 디바운스가 없는 통신 이상 횟수 추가.

17/10/25	- TS ver.	2.31
			- MM ver.	2.21
	1. 2.30에서 motive길이가 5바이트로 한바이트가 줄었는데 운행기록에는 반영되지않아 전원 투입 때 운행 거리가 맞지않던 문제가
		생기고 기타 여러 문제가 발생한다. motive아래 null 바이트를 추가하여 6바이트로 맞추어 수정.

17/10/29	- TS ver.	2.33
	1. TC 보조로 컨트롤이 넘어갈 때 출력 100V가 연결되지 않던 버그 수정.
	    열차에서 2.32로 수정하였으나 시물레이터에서 좀 더 다듬어 2.33으로 수정.
	2. 후미차의 TC가 전원 다운되면 전체 차량의 AC등이 OFF되던 버그 수정.
	3. HCR이 OFF되면 ATO 통신을 하지않고 재 투입되면 35초간 통신 재개를 기다린다.
	4. SIV가 모두 고장나거나 가선 전압이 900V아래로 떨어지면 (고장 코드 427:"SIV 가선 무정전" 발생) 연장 급전을 하지않는다.

17/11/01	- TS ver.	2.34
			- DU ver.	2.12
	1. SIV NFB를 차단하면 SD 프레임에서 trouble code가 발생하는데 디바운스를 10회로 하여 운용해본다.
	2. 상태 코드 443(판토 1 상승 감지), 444(판토 2 상승 감지), 445(판토 1 하강 감지), 446(판토 2 하강 감지) 추가.
	가. 연장 급전 중 CMK동작에 SIVK도 같이 감시하도록 추가.
	3. ESK ON/OFF 에서 피드백 입력을 3초동안 기다려서 그 시간동안 입력이 들어오지 않으면 432, 433 trouble code 발생하도록 수정.
	4. TC main/aux에서 통신이 안될 때 trouble code가 반대로 나오던 것을 수정.
	5. 입력 보드 에러로 TC나 CC가 down되어 통신이 안될 때 DI가 순간적으로 모두 0으로 읽힌다.
	    이때 B접점에 따르는 trouble code가 발생하던 버그 수정.
		정상적인 입력 보드에서 입력들을 백업해두다가 에러가 발생하면 백업되있던 입력들을 TCN으로 보낸다.
	6. 전원 투입이나 운전실 교체 때 처음 5초간은 trouble을 띄우지 않는다.
	7. DU 고장 목록 변경
		"11 TC - CC 통신 고장"		수정.
		"10 TC - TC/LIU1 통신 고장"	추가.
		"12 TC - TC/LIU2 통신 고장"	수정.
	8. V3F. ECU, HVAC도 SIV와 마찬가지로 SD 프레임에서 발생하는 trouble code에 대해 3회 디바운스를 실시하도록 수정.

17/11/08	- TS ver.	2.35
			- MM ver.	2.22
			- DU ver.	2.13
	1. TCDI_3(POWERING)와 TCDI_4(BRAKING)이 둘다 입력되지 않을 때는 PWM 값을 0으로 한다.
	2. 가끔 DU화면에 정보가 잘못 표현되는 수가 있는데(출입문 상태나 HVAC상태 등)
	    DU에서 스크립트를 실행하는 동안(특히 USB에 쓰는 동안)에는 다른 정보를 받아들이지 않는다.
		DU스크립트 중에서 USB와 관계되는 것을 모두 지우고 상태 정보나 고장 정보, 고장 목록은
		최초 설계대로 TCMS가 리스트업하여 DU에 표현한다.
	3. DU 고장 문구 중 ECU 부분 수정.
	4. 상태 정보 206:"구원 공기압 해방"(CC DI-26(cudib_uops)가 1로 될 때),
		 207:"자동 연결기 MR 개방"(CC DI-27(cudib_mrcs)가 1로 될 때),
		 208:"자동 연결기 해방"(CC DI-28(cudib_uos)가 1로 될 때) 추가.

17/11/14
	1. TC DI-3(tudib_powering)상태에서 각 차량의 공기압(ECU SD TEXT8(BCP))을 환산하여 M car >= 0.47bar,
		T car >= 0.67bar 상태가 5초이상 유지되면 고장 코드 303:"TCMS 제동불완해 감지" 발생.
		- 보안 제동 상태에서는 감지하지 않는다.
	2. siv 출력 전류를 바이트에서 워드로 확장.(분해능 3A->1A) -> 운행 기록, CDMA report 수정.
		SD TEXT 13.[7..4] + SD TEXT 9 (ste.b.iom + cIo)
	3. HVAC 상태 코드 631:"HVAC 공기정화기 부하 고장" 추가. SD TEXT 10.7(fe.b.apdkf)
	4. SIV 상태 코드 402:"가선 저 전압 감지" 추가. SD TEXT 13.6(ste.b.llvd)
	5. 배터리 전압이 85V이하이면 상태 코드 403:"배터리 저전압(85V) 감지" 추가.
	6. 표시기 설정 자동/수동 추가.
		자동 : 변화 없음.
		수동 : 열차 번호, 역 정보를 PIS에서 가져온다. DU 상단 운전 모드 오른쪽에 "-수동" 표시.
	7. SIV 트레이스 데이터를 8바이트에서 40바이트로 수정.
	8. SIV, V3F 트레이스 데이터 크기
		샘플링 데이터 (40 바이트) * 샘플링 횟수 (201 회) = 8040 바이트, 8040 바이트 + 헤드 (8 바이트) = 8048 바이트
		트레이스 블록 크기는 16.

17/11/16
	1. ENCF를 PWM을 읽으면서 검사하는데 이렇게 하면 파워링이나 브레이킹이 들어오지 않을땐 검사를 하지 못한다.
		상시 검사하도록 수정.

17/11/17
	1. CDMA로 출입문 상태가 변화되지 않던 버그 수정.
	2. 9호차 마스터일 때 ATO로 편성 번호가 맞지않게 전송되던 버그 수정.

17/11/20	- TS ver.	2.36
			- MM ver.	2.23
	1. 검수-고장 기록에서 소거 시간이 뜨지않던 버그 수정.
	2. CDMA 쪽 서비스 기기 CC 통신 부분 표시 버그 수정.

17/11/21
	1. 후미차의 MRPS도 검사한다.
	2. 구간 거리 리셋이 안되던 버그 수정.
	3. 초기 TCN 통신 카운터 수정.

17/11/22	- TS ver.	2.37
			- MM ver.	2.24
	1. "고장 기록"에서 소거 시간에 문제가 있던 버그 수정.
	2. 버전이 잘못나오는 버그 수정.

17/11/24	- TS ver.	2.38
	1. 운행 기록에 VVVF SD TEXT1.2/1.3/1.4/1.6/2.2/2.3/2.5/2.6 추가. - 운행 기록 ver. 2.05
	2. 고장 코드 9-"TC - LIU1고장으로 인해 LIU2가 백업"/경고장- 추가.
	3. TC aux.에서 다중 연결 채널 수신 버그 수정.
	4. TCN 시험 때 LIU1/LIU2 자리 표시 버그 수정.

17/11/27
	1. cdma 정보에 dir이 없어서 추가.
	2. V3F SD TEXT 1.5(reset query) 삭제.(V3F SDR에 reset가 없다.) - 고장 코드 515번 삭제.

17/11/29
	1. 운행 기록 엔코더 pwm 정보가 노치 구간별 표준 값으로 저장되는 것을 보정 없는 출력 값으로 저장하도록 수정.
	2. 시간, 바퀴 크기, 온도, 환기 시간, 방송 수동 등의 편집을 선두에서만 하였으나 후미에서도 할 수 있도록 수정.

17/12/04
	가. now, stabilize input(TUDIB_POWERING, TUDIB_BRAKING) and scan master controller notch,
		this results a bug where the value does not synchronize with the PWM value(not stabilized),
		resulting in a Bx value.
		stabilization process was eliminated and immediately recorded.
	나. when PWM value changes over a certain value, the suppressed processor is removed.
	다. above item are needed when there is a control process in TCMS,
		but line 2 is not necessary because it monitors only.
	1. DU 서비스 화면에서 RTD 블록이 다른 서비스 디바이스와 다르게 표시되던 것을 같은 모양으로 표시되도록 수정.

17/12/06	- TS ver.	2.39
			- DU ver.	2.14
	1. 고장 화면에서 페이지 수가 증가되지 않던 버그 수정.
	  - 고장 조치 화면이 필요하면서 중 고장 카운터가 필요하여 dwSevere 변수를 추가하면서 중 고장과 경 고장을 따로
	    카운터하는 버그가 생겼다. 따로 하면 안되고(중 고장은 감소도 하니까...) 이전 처럼 dwCrash 변수는 같이 카운터하도록 한다.
	2. 고장 코드 211:"SR 압력 저하" -> "주 공기 압력 저하"
	3. TUDI_15(TUDIB_DIAPDC)는 후미 차 입력으로 참조한다.
	4. 중 고장 코드 80:"TCMS 저장 장치 이상 1", 81:"TCMS 저장 장치 이상 2", 82:"TCMS 저장 장치 이상 3" 추가.

17/12/07
	1. 운행 기록에 TC 고유 번호(cProperID) 저장, RTD를 통해 운행 기록을 볼 때 기록한 주체가 어딘지 알 수가 없어서...

17/12/12	- TS ver.	2.40
			- MM ver.	2.25
			- DU ver.	2.15
	1. 리셋 상태를 운행 기록에 추가.
	2. DCU.sd TEXT2.2(full open)와 디지털 입력(CUDIB_L(R)x)를 비교하여 3초 이내로 같아지지 않으면
		상태 코드(582~597)를 표시.
	3. 열차 번호가 다르게되면 운행 기록 파일 이름과 고장 기록 파일 이름이 달라진다.
		고장 목록과 상태 목록, 고장 기록도 새롭게 갱신된다.
	4. 방송 표시기 수동 모드 추가.
		DU에서 수동 조작		- 후미차 = 0x34, 선두차 = 0x33
		선두 PIS에서 수동 조작	- 선두차 = 0x34, 후미차 = 0x33
		후미 PIS에서 수동 조작	- 선두차 = 0x33, 후미차 = 0x34
	5. TCMS 제동 불완해 감지 시간을 5초에서 7초로 수정.
	6. 비상에서 다른 모드로 전환되면 HCR ON에서와 마찬가지로 약 35초동안은 ATO 통신 고장을 표시하지 않는다.
	7. 위 6번의 시간을 40초로 수정.
	8. 고장 기록에서 이전 고장 갯수를 100개로 수정. align에 시간이 많이 소요됨.
	9. 303번 고장 정보 조건에 !TUDIB_DIR을 추가하고
		문 열림(TUDIB_DIR = 1) 상태에서 HCR과 POWERING이 들어오면 중고장 883"출입문 열림으로 역행 불가" 추가.

17/12/21
	1. TUDI_24(TUDIB_ENCF)를 B접점으로 수정
	2. 306, 313을 중고장으로 수정.(171212 황윤재 차장발 메일을 근거하여...)
	3. HVAC에서 받는 실내 온도가 음수 값일 때 표시되지 않던 버그 수정.(BYTE가 SHORT로 형변환이 되지않는다!)
	4. ECU 규격서에 따라 310, 311 고장 코드는 뜨지않는다.
	5. ECU 규격서에 따라 SDR TEXT 1.7 추가.(TUDIB_CPRS에 연동된다.)
	6. ATO warmup time을 45초로 수정
	7. ATO SD TEXT 10.0(fail.b.mmilk)과 10.1(fail.b.atplk)도 warmup time후 검사한다.
	8. 883 고장 코드가 TUDIB_DIR 상태에 따라 반응하는데 착각해서 거꾸로 했던 버그를 수정.
	9. DU상에서 SIV,V3F TD 데이터가 표시되지않던 것을 표시하도록 수정. (크기는 SD 데이터 만큼만...)

17/12/26	- TS ver.	2.41
	1. 출고전 검사를 하고나면 운행 정보 화면에 각 디바이스들의 상태가 표시되지않던 버그 수정.
		처음, 출고전 검사가 검수 모드에 있었는데 후에 운행 화면으로 옮겼다. 그러다 보니 검사가 끝나고서도
		계속 검수에 관계되는 DU페이지만 출력하던 버그가 생겼다.
	2. 출입문 상태에 있어 디지털 입력(CUDIB_LDx, CUDIB_RDx)과 통신 입력(SD TEXT 2.2)를 비교하여 3초 이내로
		상태가 같지 않으면 상태 정보(582~597)로 출력하도록 되어있는데 3초를 5초로 수정.
	3. 상태 정보 582~597을 경고장으로 수정.
	4. 상태 정보 997을 경고장으로 수정.
	5. ECU 승차율을 정확하게 하기위해 전원 투입 후 ECU와 통신이 이루어진 다음 3초 동안 ECU SD TEXT 1.2를
		0으로 한다.(door open 상태)- 교통 공사 요구사항.

17/12/27
	1. DU TI 이름 변경, RDOS->RDRR, LDOS->LDRR

18/01/02	- TS ver.	2.42
			- MM ver.	2.26
			- DU ver.	2.16
	가. "출고전 검사"가 속도 0 감지, FMC, yard, non 모드에서만 나타나도록 수정.
	1. ATO Warmup time을 60초로 수정.	// by siemens
	2. 방송 표시 수동 모드를 추가하였으나 PIS에는 아직 적용되지않아 후미차 PIS정보를 가져오지 못하는 버그가 발생.-> 수정.
	3. V3F 차상 시험에서 보안 제동을 완해하고 시험하였을 때 정차 제동마저 완해하면 차량이 전진하는 현상이 발생.
		3.1 V3F 차상 시험에서 보안 제동은 체결되어있어야 한다.
		3.2 V3F SDR TEXT 1.7(pwr), 1.6(brk) 추가 - ECU와 마찬가지로 항상 P, B 상태를 인가한다.
		3.3 V3F에서 차상 시험일 때 인통 P를 참조하지않고 SDR의 P를 참조하여 시험을 실행한다.
	4. 고장 코드 74, 75, 76(저장 메모리 이상) 추가

18/01/08
	1. 운행 기록에서 notch pwm 항목을 두고 수동에서는 엔코더의 출력을, 자동에서는 ATO 통신에서 들어오는 값을 기록하였으나
		자동 수동에 상관없이 엔코더의 출력을 기록하도록 수정. (ATO의 TEBE도 엔코더로 출력되므로 상관없다.)
	2. 정차 제동에서 POWERING신호가 TCMS로 들어가지 않기 때문에 V3F 시험을 할 수가 없다.
		- PWM 값을 보고 시험을 하도록 수정.
	가. 1.항에서 CSteer에서의 동작을 살펴보면...
		엔코더의 출력을 c_mam.cPhysicalPwm으로 받아들이고 TUDIB_POWERING이나 TUDIB_BRAKING 입력이 있을 때,
		1) 수동에서는 5 ~ 95%로 변환하여(c_mam.cPhysicalPwm) DU에는 노치 구간 표준 값(c_mam.cLogicalPwm)을 표시하고
			운행 기록(wRealPwm)에는 c_mam.LogicalPwm을 기록한다.
		2) 자동에서는 10 ~ 90%로 변환하여(c_mam.cPhysicalPwm) DU(c_mam.cLogicalPwm)나 운행 기록(wRealPwm)에는 그 값을 표시, 기록한다.
		3) DTB motiv.cEffType은 TUDIB_POWERING과 TUDIB_BRAKING 입력을 받아들이나 DTB motiv.cPhysicalEffort는
			c_mam.cPhysical을 대입하여 주차 제동에서 V3f를 시험할 때 P1 위치를 받아들일 수 없으므로 motiv.cEffType가 0이고
			motiv.cPhysicalEffort가 일정 값이상일 때 진행하도록 한다.
			CProse Decorate V3F에서도 sdr.cmd.b.b 값은 TUDIB_BRAKING에 반응하도록 되어있으나
			sdr.cmd.b.p 값은 보통 상태에서는 TUDIB_POWERING에 반응하고 시험시에는 motiv.cEffType가 0이고
			motiv.cPhysicalEffort가 일정 값이상일 때 1이 되도록 한다.

18/01/17
	1. DU에서 출입문 바이패스 바탕색은 적색으로 비상 핸들은 황색으로 수정.

18/01/25	- TS ver.	2.43
			- MM ver.	2.26
			- DU ver.	2.17
	1. 운전 화면에서 ATO 상태 변경.
		1) 처음 약 5초간은 회색 블럭의 상태로 있게된다.(다른 디바이스와 동일)
		2) 통신이 이루어질 때 까지 (최대 60초) 노란색 바탕 "대기"로 전환.
		3) 언제라도 통신이 이루어지면 녹색 바탕 "정상"으로 전환.
		4) 비상에서는 빨간색 바탕 "개방"상태 유지.
	2. DU와 TCMS간 인터페이스에 통일성이 결여되어 있던 부분을 수정.
	3. PIS/PA 전환, 자동/수동 전환 부분 추가할 것.....
	4. 후미차 ATO 표시를 BLOCK에서 "OFF"로 바꿀 것.....

18/01/29
	1. TC, CC trouble code 분리 수정. (IsTuCode())

18/02/19	- TS ver.	2.44
			- DU ver.	2.18
	1. DU 보조 전원 장치 화면에서 배터리 부분 삭제.
	2. DU 자체 검사 화면에서 MM버전이 나오던 부분 삭제.
	가. "VERSION"이란 글자를 누르면 2~3초동안 MM버전이 표시된다.
	3. DU 제동 장치 상태 화면에서 각 객차의 BC압이 녹색으로 표시되다가 CUDIB_BRCS이 감지되면 적색으로 바뀐다.
	4. 엔코더 부분 수정
		1) PWM영역에서 EB부분 없음 -> TCDIB_MCEBN이 입력되면 PWM을 스캔하지 않고 EB notch로 판단.
		2) 자동에서는 엔코더 출력을 10~90 -> 0~100으로 환산하였으나 수동에서는 그대로 두던 것을 수동에서도 0~100으로 환산하도록 수정.
	5. 운행 기록 수정.
		1) motive.effort는 10~90을 0~100으로 환산한 값.
		2) 246번째 값은 엔코더 출력 값.(비교나 환산을 하지 않은 값)
	6. 고장 코드 402번 경고장으로 수정. 고장 코드 409번 중고장으로 수정. 고장 코드 999번 상태로 수정.

18/02/36
	1. 고장 번호 756이 소거되지 않던 버그 수정.
	2. DU 주행 전력량 기록 - 합계 부분에서 오버플로우 버그 수정.
	3. ATO 모드에서 DU에 PWM값이 나오지 않던 버그 수정.

18/03/08	- TS ver.	2.45
			- MM ver.	2.27
			- DU ver.	2.19
	1. 211 편성에서 누적 거리, 전력량이 리셋이 되는 현상이 나와서 추적하기 위해 알림 번호 161~170 추가.
	2. DU "주행/적산 전력량 기록" 화면에서 각 숫자의 단위를 WORD(2바이트)에서 DWORD(4바이트)로 확장.
값
18/03/12
	1. DU에서 표시되는 SIV 상태 추가.
		SIV SD TEXT 3.5(start)가 1이면 정상, 0이면 대기

18/03/20	- TS ver.	2.46
			- MM ver.	2.27
			- DU ver.	2.19
	가. PWM부분 수정 요구가 있어 다시 정리하자면..(이 시점에서 수정한건 아니고..)
		1) 운행 기록 wRealPwm은 10~90 값을 가진다.
			-- pwm 펄스 폭은 1960~2040이 되어야 하지만, 아니면 2000을 대입한다. // 180222
			-- pwm 계산 값이 10이하이면 10으로, 90이상이면 90으로 대입한다.
			-- 실제 펄스 폭은 운행 기록 - TC analog입력(avs.dwPwm[LSW:period/MSW:high])으로 기록된다.
			-- 그러므로 엔코더 출력 이상을 판단하려면 analog입력을 조사한다.
		2) 운행 기록 motiv.cEffort는 10~90을 0~100으로 환산하여 기록하고,
			DU에는 자동에서는 cEffort를 그대로 표시하고 수동에서는 각 노치의 대표 값을 표시한다.
	1. 고장 코드 303(TCMS 제동 불완해 감지)을 검사하는 조건에 ECU 정상 상태(CUDIB_ECUMF=1)를 추가한다.

18/03/26	- TS ver.	2.47
			- MM ver.	2.27
			- DU ver.	2.20
	1. BRCS 입력에서 제동 압력 값(BCP)를 표시하는데 버그가 있어 수정.
		!BRCS나 보안 제동에서는 CC의 아나로그 값을 읽어서 표시한다.

18/04/05	- TS ver.	2.48
			- MM ver.	2.27
			- DU ver.	2.21
	1. DU 속도 특성 화면(가, 감속 상태) 추가.
	2. 고장 정보에서 이전 고장이 나타나는 버그가 있는데.. 맞는지 모르지만 일단 수정.
	3. ATO CRC 수정... 했다가 복구

18/05/11	- TS ver.	2.49
			- MM ver.	2.28
			- DU ver.	2.22
	1. SIV SDA TEXT 5.2 수정(unft->mmocd)
	2. DU 속도 특성 화면 표시 안되게 수정.
	3. 8량/6량/4량 구조 변경.
	4. ATO 통신 고장이 발생하던 버그 수정.
		- HCR만 차단하면 ATO는 멈추지만 TCMS는 마스터를 그대로 유지하고 있으므로 통신 고장이 발생한다.
		그러나 고장 표시를 차단(HCR OFF)하고 있으므로 나타나지는 않는다.
		그러다가 어느 쪽에 HCR이 들어가면 고장이 바로 표시된다.
		HCR이 없으면 Warmup Timer를 계속 초기화시킨다.
	가. 실내 전등과 공조기를 선두와 후미에서 제어할 수 있는데 열차의 진행 방향을 바꾸게되면 리셋해버린다.
		- 운행 기록에 2바이트를 추가하여 최근에 제어를 일으킨 쪽을 왼쪽이나 오른쪽으로 기록하게 하여
		전원 투입 시를 제외하고는 항상 기억된 방향의 제어를 보장한다.
	나. 가 처럼 하려고 했으나 다시 수정
	5. 진행 방향을 바꾸거나 열차 번호가 바뀔 때(전원 투입 후 아님) AC, DC등만 어느 한쪽에서 SW가 ON되어있으면
		등을 ON한다.

18/06/26	- TS ver.	2.50
			- DU ver.	2.23
	1. 보안 제동에서 bcp를 산출하는 부분에 있던 버그를 수정하였고 BRCS입력에서도 보안 제동과 같이 표현되는 것은 삭제.
	2. siv, v3f version 표시.
	3. 화재 발생 때 나타나는 창 수정.
	4. 운행 중에도 온도를 설정하도록 수정.
	5. 경고장 642-"온도 센서 고장" 추가.
	가. 상태 코드 161~170을 이벤트로 수정.

18/07/09	- TS ver.	2.51
	1. 비상 제동 단추 B접점으로 수정
		- 선두차 비상 제동 단추와 후미차 비상 제동 단추가 같이 들어올 때는 선두 차 비상 제동 단추만 인식한다.
	2. 표시기 장치 수동 추가
		- TCMS에서 DU를 통해 수동 전환 추가/
		- 표시기 장치에서 마스터 전환 가능 - 표시기 장치에서 0x31/0x32 전환 가능
		- 표시기 장치에서 수동 전환 가능
	3. 표시기 장치 SDR에 각 객차 탑승율(0~200) 10 바이트 추가.
	4. vvvf는 SDA에 여유가 있으므로 괜찮은데 siv는 그렇지 못하여 10바이트를 추가하였다.
		- TCMS는 처음 siv통신에서 수신 바이트 갯수를 가지고 이전의 siv인지 수정한 siv인지 확인하므로
			siv sofrware를 업그레이드 한 다음엔 TCMS를 반드시 리셋하여야 한다.

	===== about PIS Manual =====
	가. by TCMS.....- 아래 *가===. 에서 첨언
		1) PIS MODE CHANGE STEP 1 :
			CStage가 DU에서 자동,수동 요구를 받는다.
			c_pisReq.bStatus에 1/0(수동/자동), c_pisReq.bRecog는 1
			// 180717
			// DU에서 pis 단추를 조작하였다는 워드를 받는다. 이 워드가 1일 때만 실행...
		2) PIS MODE CHANGE STEP 2 :
			CLand Reform()에서 DU 요구를 검사하여 자신의 c_cmd.user.b.pisRequest를...
			recip.real.motiv.lead.b.epaim, recip.real.motiv.lead.b.epreq에 기록하여 전송한다.
			전송한 후 DU 요구를 지워서 다음번 전송에서는 재 참조하지 않는다.
		3) PIS MODE CHANGE STEP 3 :
			마스터측 CLand Supervise()에서 선두나 후미의 요구가 있는지 검사하여
			선두 요구가 있고 선두측 서비스 기기 제어 코드가 0x32이거나,
			후미 요구가 있고 후미측 서비스 기기 제어 코드가 0x32이면 제어 코드를 바꾼후
			c_cmd.user.b.pisRequest를 지우고(recip.real.motiv.lead.b.epreq도 0이 된다)
			서비스 기기 마스터/슬레이브 전환을 위해 CVerse::SetPisMode()를 호출(c_pisInfo.bAim, bUser, /*bRequest*/)한다.
		4) PIS MODE CHANGE STEP 4 :
			CVerse::Reform()에서...
			recip에 c_pisInfo를 옮겨 전송한다.
			// 180717
			// 여기서부터 좀 복잡하고 몇개의 비트가 더 필요하여 미룬다.
			// *1, *3항을 해결하기 위해서...
		5) CVerse::DecorAis()에서 (*1)recip.real.motiv.lead.b.pisaim이 1이면 pisuse를 통해 선두/후미를 확인한 후
			자신 쪽이면(마스터가 판단한 방향) pis로 mmr(master (manual mode) request)를 1로 한다.
		*1:이런 조건은 자동 전환에서는 맞지 않는 방법인데 한번 수동 전환이 되면 자동 전환은 불가능하다.
		*2 이런 동작은 pis sda.ref.b.mma가 0인 조건에서 되므로 이 조건이 맞아 실행된 후 mma가 1이 되면
			mmr은 0이 된다.
		*3 다시 자동으로 전환하는 방법이 없는데...
			DU-"초기 값 설정"에서 온도,환기와 표시기를 분리하여 설정할 수 있도록하고 CStage에서는 표시기 설정이
			오면 무조건 반응할 수 있도록 하여야한다.
		- 참고로 서비스 기기 제어 코드는 CVerse::Reform()을 통해 draft로 전송되며 선두나 후미는 draft의
			서비스 기기 제어 코드를 보고 서비스 기기로 해당 코드를 전송한다. "recip.real.cSvcCtrlCode"

18/07/17	- TS ver.	2.52
	1. 전원 투입, 또는 방향 전환, 열차 번호 변경에서, 또한 DTB통신이 없을 때  AC,DC등은 ON된다.

18/08/08	- TS ver.	2.53
	1. DC등은 출력을 ON하면 꺼지는데 이전 버전에서는 ON하도록하여 의도하지않게 꺼지게 되었다.
		AD등 출력은 ON하고 DC등 출력은 OFF한다.

18/08/27	- TS ver.	2.54
	1. 상태 코드 845-"표시기 장치 마스터 전환 요구" -> 알림으로 수정.
	- 고장코드_180227과 고장코드_180710 파일의 내용이 틀린다. 보완할 것.
	2. 운행 기록에서 v3f.cBed를 삭제하고 pis 통신 내용 중 역정보, 열번, ref 추가.
	- 운행 기록 Ver. 20.7.
	- 열번(wOtrn)은 중복되는 느낌이 있으니 후에 더 필요한 내용으로 대체할 것.
	3. 상태 코드 42, 43, 44, 45, 46, 48, 202, 203, 443, 444, 445, 446, 알림으로 수정.
	4. 중고장 코드 409 -> 경고장으로 수정.

*가===============================================================================
	//18/09/10 - 그 동안 PIS 수동 작업에 있어 햇갈리는게 있어 정리해본다.
	1. PIS CONTROL CODE #1 - CVerse에서 초기 제어 코드를 선두 0x31, 후미 0x32로 한다.
	2. PIS CONTROL CODE #2 - CVerse에서 디바이스 응답이 수회 이상 지속되면 블럭시킨다.
		c_cLineBlocks |= (1 << PDEVID_PIS) -> pDoz->recip.real.cPoleBlock ->
		CVerse::SetServiceControlCode()에서 블록된 쪽은 0x33, 아닌 쪽은 0x34를 보낸다.
	3. PIS CONTROL CODE #3 - DU를 통해 블록 해제가 (어느 쪽에서든)들어오면
		CLand는 c_cmd.user.b.releaseServiceBlk -> c_recip.real.sign.ecmd.b.relblk를 통해
		c_cLineBlocks를 지운다.
	- TCMS가 방식을 전환할 때
	4. PIS CONTROL CODE #4 - DU를 통해 사용자 전환을 알게되면 CStage는 이를 기록해두었다가...
		* 180709 가-1.
	5. PIS CONTROL CODE #5 - CLand에서 c_recip.real.motiv.lead.b.epaim,
		c_recip.real.motive.lead.b.epeq등으로 옮겨 선두와 후미쪽, 어디서라도 나타날 수 있도록 한다.
		* 180709 가-2.
		* epaim과 epreq는 명령이므로 동작이 수행되면 지워진다.(유지된다는 보장이 없다?)
	6. PIS CONTROL CODE #6 - CLand에서 선두와 후미의 요구를 받아들여 (또한 선두와 후미에서 같이)
		CVerse::TurnPisCode()를 실행하고(제어 코드가 바로 전환된다.)
		다시 CVerse::SetPisMode()를 호출한다.
		* 180709 가-3.
	7. PIS CONTROL CODE #7 - 선두, 후미차 요구가 모두 가능하도록 CVerse::Reform()에서
		c_recip.real.motiv.lead.b.pisaim, c_recip.real.motiv.lead.b.pisuse에 옮긴다.
		* 180709 가-4.
		* pisaim과 pisuse는 계속 유지되어서 상태를 나타낸다.
	8. PIS CONTROL CODE #8 - 수동 상태이면 요구가 발생한 쪽의 PIS에게 hd.b.mmr을 1로하여 전송한다.
		* 180709 가-5.
	9. PIS CONTROL CODE #9 - 양쪽 PIS의 ref.b.mma 비트 상태가 바뀌면
		CVerse::SetPisManual()을 호출하여 CVerse::c_pisInfo.bManual[2]에 각각 저장한다.
		그리고 알림 상태를 남긴다.
	A. PIS CONTROL CODE #A - 0x31 또는 0x34를 보내오는 PIS(GetValidPisCode()- TCMS와 PIS 제어 사이에
		우선 순위를 둘 수가 없어 이렇게하였는데, 각 상태에 따라 서로 참조하는 변수들을 달리하여-
		mma에선 사용하는 변수가 거의 없지만- 충돌이 일어나지 않게하려는 고육지책이다.)의 ref.b.mma에 따라...
		- CLide에서 mma가 0이면 ato의 otrn을 사용하고 1이면 PIS의 otrn을 사용한다.
		- CVerse에서...
			- TRS로 전송하는 otrn을 mma에 따라 ATO/PIS 선택 - ??? 이부분은 이상하다. 저장된 otrn을 사용???
			- PIS와 PAU로 전송하는 역정보도 위와 같이 선택한다.
			- 선두와 후미쪽 mma가 감지되고 감지된 쪽이 후미라면 TurnPisCode()를 실행하여 제어 코드를 전환한다,
		- CUsual에서...
			- DU에 표시하는 역 정보도 ref.b.mma에 따른다.
	* 180709 - * 문제는 유효하다.
	* pDoz->recip[fid].real.svc.i.a.t.s.ref.b.mchg도 있는데 정리할 것.
*================================================================================*

	5. PIS 모의 주행 시험을 추가하여 GetValidSide()에서 ref.b.mma가 1일 때 ref.b.sim이 1이면
		PAU와 통신을 하지않는다.
		또한 DU에 "모의"를 표시하고 기록(846-"표시기 장치 모의 주행"-알림)을 남긴다.(18/09/10)

	//180911
	* 0호차 LIU2가 부팅이 늦어(부팅이 늦는 문제는 따로 해결을 하고) 나타나는 현상이 16, 18 고장 코드가 뜬다.
		1. 통신 이상이 생기면 따로 검사를 하지 않는 코드가 뜨는 버그가 있고
		2. 통신 이상이 생겼는데 통신 이상 고장 코드가 나타나지를 않는다.
		- 2번 문제는 이전에 디버그를 하면서 고장을 정렬하는 함수(CDump::GetSortList())까지 생각하질 못해
			단지 DU상에만 표현되지 않던 것을 수정하였다.
		- 1번 문제는 통신이상이 생기면 디바운스 횟수까지는 이전 버퍼의 내용으로 대체하면서 프로세스를 진행하는데
			이게 전원 투입 후이다 보니 이전 버퍼의 내용도 없는 상태이다(통신이 정상으로 된적이 없으니).
			15~18번 고장을 검사할 때는 pDoz->real.prol.dwOrder가 0이 아닐 때만 검사하도록 한다.
		- 1번의 문제에서 GetRouteState함수는 여러 곳에서 사용하고 있는 함수인데 웬만한 곳은 위의 방법을 추가한다.
	6. 	42-"자동 회차",
		43-"전 자동 운전",
		44-"자동 운전",
		45-"수동 운전",
		46-"기지 운전",
		48-"운전 방식 중복",
		202-"CMSB 동작",
		203-"CMSB 정지",
		443-"판토 1 상승 감지",
		444-"판토 2 상승 감지",
		445-"판토 1 하강 감지",
		446-"판토 2 하강 감지"
		위의 코드들을 EVENT로 하면 EVENT는 매번 기록하는 코드 종류이므로 감지될 때 마다 기록하게 되어 고장 기록이 넘친다. 젠장
		TROUBLE_NOTICE 항목을 추가하여 위의 코드는 알림이며 상태가 바뀌어야 기록하게 한다.

	//180913
	가. 고장 기록과 상태 기록, 알림 기록을 한개의 스택에 같이 저장하다보니 매번 분류하는데 시간이 많이 소요될 수도 있다.
		고장 기록, 상태 기록, 알림 기록(은 표현하지 않으니 저장할 필요는 없지만) 스택을 분류하여 따로 저장한다.
		이렇게하면 1쪽 이상을 표시할 때 12개씩 스캔하여 해당 쪽수를 찾을 필요없이 인덱스를 사용하여 바로 해당 쪽을
		나타낼 수 있으므로 이렇게 수정할 것.
	// 180917
	가. 13일자 참고하여 고장 기록과 상태 기록을 인덱스로서 쪽수를 찾도록 수정.
	1. 고장 번호 108 삭제.
	나. 고장 번호 108 -> 알림으로 수정.
	2. 고장 번호 218, 883 -> 상태로 수정. 520, 521은 고장 처치 문안이 없어 상태로 두었는데 상태 코드로 고정.
	3. 고장 번호 303 삭제.
	4. ATO나 PIS에서 열차 번호가 "0000"이 되면 강제로 "1111"로 하여 TRS로 전송.
		17/10/19에서 수정하였으나 17/12/12에서 열차 번호를 TCMS에서 참조하도록 수정하면서
		놓치게 된 것을 수정.
	5. 고장 코드 330, 334, 339, 342, 343, 344, 346, 429, 502, 516, 517, 538 -> 중고장으로 수정.

	//180928
	6. 위 4항 수정에 있어 PIS, PA로는 "1111"이 전송되는데 TRS에는 "0000"이 전송되고있던 것을 수정.

18/10/03	- TS ver.	2.55
	가. 180626에서 수정한 내용은
		- draft에 wheel diameter와 temp를 기입하였으나 추가되는 사항들 때문에 삭제하고 consult항으로 넘겼다.
		그런데 위 두 항목은 environs에도 있거니와 선두와 후미가 동일하게 되므로 굳이 consult항에 있을 필요가 없다고
		생각했으나 CC는 environs가 없으므로 consult항에 있어야 한다.
	1. 고장 번호 57 삭제.
	2. 상태 번호 41 -> event로 수정
	3. DU를 통한 각종 설정(온도, 거리, 전력 등)에서 설정 후 선두, 후미가 동시에 되지않는 문제가 한번 씩 발생.
		설정하는 지점(trigger)과 설정 내용(context)의 동기가 맞지아니한 것이 원인이었다. 수정 완료.
		나. 설정 트리거 비트는 CTurf에서 하고 TCN 버스에 설정 내용은 CLand에서 트리거 비트와 상관없이 교대로
			넘기다 보니 동기가 맞지않았다.
	다. PWM 입력이 아마 노이즈로 추정되는 것으로 인해 0으로 들어올 때가 있다.
		폭은 무조건 2000으로 하고 F/R이 있을 때 high 폭이 100(5%) ~ 1900(95%)일 때만 PWM을 계산한다.
		* 마스터 컨트롤러가 중립이 아닌때 F/R은 중립으로 갈 수가 있는가??????
	라. DU 검수 화면에서 한 쪽에서 설정을 하면 다른 쪽도 같이 나와야하는데 나오지를 않았다.
		DU에서 검수 단추를 누르면 TS는 설정된 것을 검사를 하는데 검사가 마치고 쪽에 관계되는 변수들을
		초기화하는 실수가 있었다, 필요없는 건데... 지움.

18/10/11	- TS ver.	2.56
			- MM ver.	2.29
	가. 무슨 행동의 결과인지는 알 수 없으나 현재 날짜 보다 훨씬 나중의 날짜를 가진 디렉토리가 생성되기도 한다.
		이렇게 되면 초기 설정에서 "가장 나중 날짜의 가장 나중 시간에 생성된 운행 기록에서 가져오는 누적치"라는
		명제에서 추출되는 누적 거리와 적산 전력등을 참조하게 되며 이 디렉토리는 지워지지도 않아서 계속 적용되는
		문제가 생긴다.
	나. 속도 0일 때 각 tc들은 통신을 통해 들어오는 적산 거리와 적산 전력들을 비교하여 최대치를 수용하게 하였다.
		이 때에 CPU를 교체하였든가, 또는 잘못된 날짜 입력으로 지워지지 않는 미래의 날짜(h/sd/arc/dXXXXXX)에서
		나오는 정보, 등의 문제로 한 쪽이 0xffffffff를 보내게되면 나머지도 모두 그 숫자로 일치되는 문제가 생긴다.
	다. 누적 거리와 누적 전력등은 본문에서는 64비트 크기를 가지는 정수로 계산되고 기록되지만 GPPRO(DU)에서는
		64비트 정수를 다룰 수가 없어 32비트 정수로 넘긴다(단순히 하위 32비트 만을 넘기고 받는다).
		이러다보니 잘못된 값을 주고 받을 경우도 생기는 문제가 있다.
		또한 DU에서 사용자가 입력한 값을 넘겨받을 때 체크섬이 없다.

18/10/12
	가. 슬레이브에서 Reform()을 A,B 채널 마다 수행하다보니 consult 교번이 이상해져서
		Reform()을 한번만 하도록 수정.
	나. 외부 온도를 계산하고 센서 오류를 나타내는 부분을 Reform()-(전송 전)에서
		Supervise()-(한 버스 사이클이 완료된 때)로 옮김.
	다. 18/10/11-나항의 문제 해결로서 위 가.항을 통해 consult부분이 정확히 전송되는 것을 확인하였고
		적산 거리와 전력등을 산출하는 4개의 위치(TC0-LIU1/2, TC9-LIU1/2)에서 서로 전송된 값을 정렬하여
		가장 큰 값이 아닌 두 번째로 큰 값에 일치하도록 수정하였다.

18/10/19	- DU ver.	2.25
	1. 보안 제동에서 BC 값을 아날로그 채널에서 가져오던 것을 ECU에서 가져오는 것으로 수정하였으나
		무조건 ECU에서 가져오게하면 현장에서 센서 위치가 바뀐 차와 그렇지 않은 차를 구분해서 프로그램을
		적용하여야 하는 어려움이 있으므로 TC 4대의 아날로그 값이 하나라도 500이상(819~4096->0~101.972)이면
		아날로그 값을 가져오고 모두 500미만이면 ECU의 BC 값을 가져온다.
	가. 18/10/11-가. 나. 항 문제를 해결하기위해...
		RTD에 의한 시간 설정은 파워 투입 때 어느 쪽 RTD에서 timevalid가 설정되고 정상 시간일 경우에만 하게되는데,
		그때 mm에서 시간을 설정한 후 그 시간 이후의 디렉토리들은 지우게하였다.
		- RTD는 자신의 시간이 유효하면 timevalid를 항상 1로 한다.
		TU는 전원 투입 후 약 3초를 기다렸다가 이 비트가 1이면 시간 설정을 하게되며 전원이 꺼지지 않는 한(선두, 후미가
		바뀌어도) 이 비트는 무시하여 RTD에 의한 시간 설정을 다시 하지는 않는다.
	나. 18/10/11-다. 항의 문제를 해결하기위해 누적 거리와 전력등을 DU에 넘기거나 받을 때 K 단위를 적용.
	2. DU-운전 화면에서 HVAC가 정상 상태일 때는 해당 객차의 실내온도를 표시하도록 수정.

18/10/23
	가. 181019 가. 항에 덧붙여...
		TU는 파워 투입에서 rtd timevalid를 기다리는 비트를 1로 설정해두고 rtd에 의한 시간 설정이 완료되면
		이 비트를 0으로 하여 방향 전환에서는 rtd timevalid를 무효로 한다고 하였는데 문제는 양쪽 TU가 모두
		그렇게 되다보니 전원 투입 후 rtd timevalid를 받고 방향 전환 후 전환된 선두 차에서도 rtd timevalid를
		기다리는 비트가 1이 되어있어 rtd timevalid를 받아들인다는 문제가 있었다.
		rtd에 의한 시간 설정이 DTB를 통해 각 TU에 전달되면 각 TU는 자신의 rtd wait 비트들을 지우게끔 수정하였다.

18/11/28	- TS ver.	2.57
	1. 18/10/29 버전에서 BC값을 아날로그 채널에서 가져오면 옅은 적색으로, ECU에서 가져오면 녹색으로 표시하도록 수정.
	가. 화재 감지 신호가 각 차에서 발생하면 해당 차의 HVAC로 req.b.fire를 '1'로 해서 SDR을 전송해야하나
	버그가 있어 엇갈려 다른 객차로 나가고 있던 것을 수정.

19/01/02	- DU Ver.	2.26
	1. DU 598페이지의 운행 거리와 적산 전력등이 W 단위로 되어있었고 710페이지에서 표시하는 기록은 그 값에 1000을
	나누어 kw 단위로 표시하는데 18/10/19에서 598페이지로 가는 정보 kw 단위로 수정하면서 미리 1000으로 나눈 값을
	주다보니 710페이지에서 또 나누게되어 두 페이지간 정보가 맞지 않던 것을 DU 710페이지의 스크립터를 수정하여
	맞춤.

19/01/10
	1. DU-DU M551 페이지에서 출입문 통신 오류 카운터 자리가 아래위가 바뀐 것을 수정.
	2. 9호차 출입문 통신 오류 카운터를 위치 대칭 이동해서 보내도록 수정.
	3. 후미차에서 DTB 통신이 안되면 아무 것도 할 수가 없어 DU에 표시조차 안되던 것을 Alone()에서 FID_HEAD의 dominate를
		강제로 1로하여 Supervise()를 실행하게 함으로서 DU에 통신 불능 표시하도록 수정.

19/04/08	- DU ver.	2.27
			- TS ver.	2.58
	1. DU- 고장 09번 "TC - LIU1 고장으로 인해 LIU2가 백업" -> "TC - LIU1 고장으로 인해 LIU2로 절체" 수정.
	2. 위 고장 번호 9의 소거 시간이 기록되지 않던 것(소거 시간을 기록하면 고장이 DU화면에서 사라지므로 운전자의 관측에서
		벗어날 우려가 있었던...)을 수정.
	3. 고장 번호 10 "TC - TC/LIU1 통신 고장"을 중고장에서 경고장으로 수정.

19/05/23	- DU ver.	2.28
			- TS ver.	2.59
	1.TUDIB_19 -> TUDIB_CUTTRACTION 변경, 고장 코드 96:"역행 차단 감지" 경고장-추가

19/08/18	- DU ver.	2.29
			- TS ver.	2.60
	1. 96번 고장을 상태로 변경.
	* 6량 설정에서
	* tc
	가. CDtb에 열차 길이를 재 설정하지 않아 통신 시간이 초과되던 것을 수정.
	나. ESK위치 = T1->M2.
	다. pan up에서 열차 그림이 흩어지던 것을 수정.
	* du
	가. HVAC 온도 단위 위치를 맞게 수정.
	나. HCR이 바뀔 때 10량 표시가 처음에 뜨고 6량으로 표시되던 것을 수정.
	다. M2 VVVF 그림 위치 수정.

19/08/26	- TS ver.	2.61
	1. 96번 고장을 참조로 변경하여 DU에서는 보이지않고 분석 프로그램을 통해서만 보도록 수정.

19/09/09
	가. 열차 길이를 맞추는 방법에 있어 디폴트를 10으로 하고 전원을 투입하면 슬레이브는 버스에서 오는 정보를 가지고
		디바운스를 하여 안정되면 AlignLocal()을 함으로 하부 장치와의 통신에 문제가 없는데
		마스터는 기존 방식(Active와 버스 정보가 달라야 AlignLocal()을 실시한다)으로는 하부 장치와의 통신에 문제가
		있어(Active와 버스 정보가 같으므로 AlignLocal()을 하지 않는다) active와 passive로 나누었던 열차 길이를
		하나의 변수(cCur)로 통합하고 c_vehicle.length.stub 변수의 디바운스가 안정되면(마스터는 처음 조합에서 얻어진
		열차 길이를 초기치로 하고-별 효과가 있어보이지는 않는..., 슬레이브는 버스에서 전달되는 열차 길이를 초기치로
		한다) AlignLocal()을 실시하여 하부 장치와 통신이 안정되도록 한다.
	나. 예전에 SIV SA가 원래 길이에서 6바이트(버전-2바이트, 예비-4바이트)가 추가되어 현장 업데이트를 하는데 있어
		SIV와 같이 업데이트하는 일정에 동기를 맞추는 부담이 있어 원래 바이트와 확장 바이트가 모두 지원되도록 하였으나
		24칸에도 그와 같은 코드가 있으면 오히려 SIV 통신의 문제를 찾을 수 없으므로 지운다.
		하지만 SIV SA를 확장은 하였으나 트레이스 데이터로 까지 적용하지는 못하였는바 그 원인은 SIV socket buffer size
		때문이었는데 궁여지책으로 트레이스 데이터는 추가되지 않은 이전의 데이터 양식을 쓰기로 하였으므로
		현재도 그리하도록 한다.

19/09/20
	가. 24칸을 적용한 후.. 또는 그 전에도 그리하였는지 모르겠지만..
		CR 교대 때 LIU2가 down되는 현상이 발생한다.
		처음에 이 작업의 안전성을 확인하기 위해 며칠을 계속 가동하였는데 별다른 이상이 없어
		그 이후로는 시험을 해보지 않았고 다른 작업의 영향인지 24칸 작업의 영향인지
		현재 이 문제가 생겨 관찰하고 있는 중이다.
	나. DU "고장 기록"화면에서 객차 번호를 바꿀 때 이전 객차의 고장 기록 화면 잔상이 남아있는데
		이를 제거하여야 한다.
	다. SD 메모리 사용량에서 운행 기록을 24시간 적용->한달 계산했을 때 약 2.7G를 사용한다고 생각해서
		고장 기록까지 생각해도 전체 8G 용량의 반정도로 여겨 여유 공간에 대해 별다른 동작을 취하지 않았는데
		로그 기록 한달치를 추가할 것으로 보고 생각하면 기동에서 여유 공간이 절반이상 남아있지 않으면
		상대적으로 덜 중요한 파일부터 지우는 적극적인 동작이 필요하다고 본다.
	1. AlignOldTrouble()에서 각 객차에 대해 100개씩 고장 코드를 채우게 했는데
		이전 고장 코드가 하나도 남아있지 않은 객차에 대해서는 저장된
		모든 파일을 검색하고 있다.
		그러다보니 800초씩 걸리기도 하는 문제가 생겨 30초 이내에서만 찾도록 시간 제한을 두었다.
	라. CPaper's SetOblige()에서...
		c_cFloatID = BYTE(~c_uOblige & OBLIGEBF_ONLYPOS);
		위 줄은 BYTE라는 형변환 연산자를 쓸려고 했는데 BYTE()라는 함수 구조가 되었다.
		그러나 본문에서는 그러한 함수도 없고 컴파일에서 별다른 오류나 주의 문자가 발생되지 않았다.
		c_cFloatID = (BYTE)(~c_uOblige & OBLIGEBF_ONLYPOS);
		...로 수정은 하였으나 이 문제를 상세히 살펴볼 필요는 있다.

19/10/22
	가. 보다 더 나은 안전을 위해 CC가 ESK를 출력할 때 fid_head의 출력 명령 비트에 통신이 정상인 TC들(fid_headbk,
		fid_tail, fid_tailbk)의 출력 명령 비트들을 and하여 출력한다.
		통신이 정상인 TC들 중 하나라도 ESK 출력 명령 비트가 0이면 ESK는 출력되지 않는다.

19/12/05	- DU ver.	2.30
			- TS ver.	2.62
	1. 차상 시험에서 주 공기 압력 정상 판단을 각 객차의 CMG 입력(DI)의 OR 조건으로 하였으나
		선두와 후미의 MRPS 입력(DI)으로 대체한다.
	2. 차상 시험에서 MRPS가 차단되면(DI = 0) 시험을 일시 중단한 후 사용자가 후에 재시작을 하거나
		중지하도록 한다.

19/12/19
	가.

20/01/09
	1. 고장 기록 탐색 시간을 30초로 줄이면서 유효한 문장을 참조로 고치는 실수로 고장 기록쪽에서
	"잠시만 기다립시오"라는 글귀가 사라지지 않았던 버그 수정.

20/01/13	- TS ver.	2.63
			- MM ver.	2.30
	- 위 버그를 위한 변명
	1. 2019년 09월 20일 수정에서...
		TCMS는 전원 투입 때에만 이전 고장 코드를 검색하는 프로세스를 실행하게 된다.
		이 프로세스는 이전 코장 파일들을 검색하여 고장 코드 100항목을 채우게 하는데
		이전 고장 코드가 별로 없는 객차에 대해서는 아주 많은 파일들을 검색하게 되어
		실행 시간이 10분을 넘는 상태가 발생하기도 한다.
		물론 고장 코드 검색 프로세스는 주 프로세스와는 별도이므로 열차 운행에는 지장을
		주지않으나 운행 정보 저장 프로세스와 메모리 충돌의 우려가 있어 고장 코드 검색
		프로세스의 실행 시간을 30초로 제한하는 코드를 추가하면서 프로세스 마침 부분에서
		반드시 실행하여야 하는 부분을 주석으로 처리하여 실제 코드에 적용되지 않게되는
		버그를 초래하였다. 마침 부분에서 검색 종료를 나타내는 플래그를 표시하여야
		주 프로세스에서 검색된 고장 코드들을 표시하는데 위와 같은 사유로 인해
		검색 종료 부분이 삭제되다 보니 지금과 같이 고장 기록이 나타나지 않게 되었는데
		주석 처리한 부분을 원래대로 복원하여 실제 실행 코드에 나타나도록 수정하였으므로
		추후로는 그와 같은 오류가 나타나지 않을 것이다.

20/02/18	- TS ver.	2.64
			- DU ver.	2.31
	1. 6칸 추가
		- FDU, BMS, CMSB 통신 추가
		- 고장(상태) 코드 추가
			CMSB: 240~248, BMS: 256~269, FDU: 276~294
	2. DU 화면 추가. 102, 576페이지
	가. 점검 목록
		1) CMSB 통신
		2) FDU 통신
		3) BMS 통신
		4) 6량에서 CDMA report
		5) du에서 6량 표시, "EX" 표시
		6) du 추가 장치와 통신 내용 표시
		7) du CM 통신 표시
		8) du fdu 통신 표시
		9) fdu fire detect
		10) du 배터리 전압 확인
		11) 장치 통신 고장 횟수
		12) 서비스 장치 통신 오류 카운터
		13) HVAC PDT
		14) HVAC DU 상태 n->fid->cid->0,9
		15) 연장 급전 시험
		16) 차상 시험
		17) 통신 오류 카운터 초기화

20/06/29	- TS ver.	2.65
			- DU ver.	2.32
	1. 18/10/19 수정 내용 중 ECU BC 값을 통신과 아날로그 센서, 두 군데서 취하는 방법을
		통신으로 고정시키고 아날로그 센서의 값은 외부에 따로 연결된 BC 압력 센서(4~20mA)값을
		읽어 CUDIB_NRBD와 같이 취급한다.

20/07/07
	1. 시간이나 오류 카운터 설정에서 완료되고도 오류 번호가 뜨던 문제 제거-unifr은 unifa가 없을 때에 유효.

20/08/26
	1. 24칸에서 CUDIB_SIVF가 B접점으로 수정됨.

20/09/02
	1. 24칸에서 CUDIB_SIVF A접점으로 복구.
	2. ........ PANPS1, 2 입력을 A접점으로 수정.
	3. ........ ECU SDR/SDA 수정.

20/10/16
	1. 24칸에서 ECU AS, BC 값 변환식 수정.
	2. ........ 대차 중량 값 수정
	3. ........ siv tdc 수정.(?????)
	4. ........ tcdi_39 => ccdi_94로 이동. "공기질 정화 장치 동작 스위치"
	5. ........ ccdi_95 추가. "공기질 정화 장치 자동 방식"
	6. ........ 경고장 447, 448 추가 "PAN CUT-OUT COCK 1(2) 감지".
	7. ........ 경고장 777 추가 CC-DI43.
	8. ........ 상태 96 추가, TC_DI19.
	9. ........ 경고장 755 추가, TC-DI22(B).
	10. ....... 경고장 208 추가, CC-DI104(B). TU's view
	11. ....... 경고장 680 추가, CC_DI107(B). TU's view
	12. ....... 경고장 109 "신호 장치 속도 불일치" 추가
		신호 장치에서 전송되는 속도와 TCMS가 계산한 속도중 어느 것이라도 10Km/h를
		넘어서면 두 속도를 비교하게 되는데 여기서 5%이상의 속도 차이가 난다면 발생.
	13. ....... 경고장 307 "ECU 제동 불완해 감지" 수정
		ECU에서 압력 센서를 TCMS의 아날로그 채널에 두 개씩 병렬로 달아서
		여기서 감지되는 압력이 0.6bar(819~4095->0~10.12)를 5초 동안 계속 유지하면
		발생.
	14. ....... CMK 출력이 나가서 피드백 감시 시간이 ON-6초, OFF-6초 였으나
		OFF만 10초로 수정.
	15. ....... fdu에서 전송하는 fire detect 신호를 가감없이 DU에 출력하였는데
		센싱이 불안한 듯 하여 fd 상승 에지만 CUDIB_FD에 동기되도록 하였다.
		즉 CUDIB_FD 신호가 들어오지 않으면 fd 발생을 표현하지 않는다.
		고칠려나??? 풋...

	16. 아직도 혼자 하는 듯 하다.
		물론 혼자 시작했으니 혼자 하는 것이 당연하겠으나
		이렇게 설계가 200칸과 24칸이 틀어질 것이라면 차라리 소스를 따로 가져가는 것이
		나았다. 그랬으면 24칸용 인원도 추가할 수 있었을까?? 다원이?? 임원들이??
		한 프로젝트를 끝내는데 3개월도 지겨운 내가 5년간을 하고있다.
		20배가 더 지겹고 짜증나고..., 두 달 후에 또 잠수타면 그때는 마누라가 직접
		사표를 회사로 가지고 온단다. 내 천성은 딱히 프로그램과 기술자가 맞는데...,
		정년까지 프로그램만 짜고 싶었는데..., 회의가 든다. 다원이라는 회사와 임원들이,
		5년간을 같은 프로그램 몇 개를 들고 있으면 20배 꼽해서 몇 배의 짜증이 난다.
		생각하니 PC 프로그램은 딴 넘이 짜도 되지 않을까(좀 편해볼 요량으로) 한 놈을
		들였더니 도저히 일하는 게 맘에 안들더라. 딱 맡은 일만 하려하고 동료의 힘듬을
		무시하는 놈이었지. 내가 사장이라면 일찍이 짜르고 싶었는데 맡은 일을 거두자마자
		나가서 다행이었다만 아직 그 놈이 하던 일이 대책이 없어, 당장 급한일 아니고해서
		김천처럼 조으는 놈은 없다만 언제 조으는 놈이 나타날지 아무도 모르지.
		오늘도 새벽에 시물레이터 피시 프로그램에서 (분명 내가 짠건데 낮에 용식이 뭘
		건드렸나) 당연한게 안되는 평생 처음보는 현상이 나타나 위에 적은 수정 사항 중
		몇 개를 시험을 못하고 있어, 내일 용식이 전화해 물어보자 하면서도 차라리 내가
		손댈 걸하는, 이러면 평생 기술자만 되지, 장은 못되는 거야. 장은 기술을 직접
		하면 안돼. 그러면 팀원이 고달파(편한가??). 덴장이네! 회사와 임원들이 기술자를
		못 구하니 내가 기술자하면 되고 팀원들은 고달파지고. 무슨 개X같은 회사가..
		기술자를 해도 그렇다. 금요일 연락와서 월요일 수정해달라 하면 우린 또 사람들이
		일요일내려가서 확인하고 해야하는데 무슨 프로그램 수정하는 것을 개X같이
		여기는가, 하기사 OS도 모르는 개X같은 회사니 뭘을 알겠냐만은..., 소스 한줄
		고치는 게 엿장수 가위같아 보이겠지만, 만일 회사말대로
		김동호가 없어 히타치가 티씨엠에스를 납품했어, 그럼 어제 처럼 저들 생각나는데로,
		저들 재미지는 데로, 저들 아쉬운 데로 뭘 수정해달라 할 수 있어?
		쥐꼬리 연봉에 덴장 대접이라고는..., 야.. 재미가 있는 회사고 재미가 있는
		일이라면 왜 잠수타겠니? 내가 알콜 중독자라도 되는줄 알아?
		나는 여지껏 니가 알다시피 (좀 더 녹이 슬기도 했다만)보기싫으면 안보고
		하기싫으면 안하는 (그런 철이 없는) 놈이야(이건 지울까?).
		(그런 철이 없기 때문에) 아직 너한테는 유용한 기술자로
		남아있는 것이고. 무슨 이런 개X 같은 회사에서 10년 전에 다시 만난 20대 동무하고도
		의절하겠다만... (그게 뭔 큰일은 아니지만). 회사가 개X같으니 임원인 너도 어쩔 수
		없겠지만..., 나는 마누라가 사표내러 오기 전에 애덜 얼굴 모른 척하고 사표 낼란다.
		어음이나 들이밀고, 난 어쩌게 정말 사표내려고 마누라하고 약속도 했어.
		근데 애덜 얼굴보고, 자식이나 동생같은 애덜 얼굴보고는 말이 안나오더라
		(근데 갸들도 내가 사표내길 바라는 지도 모르겠다). 애덜이 안보이는 주말 새벽에는
		또 그런 맘이 간절하다.

20/10/30
	1. 24칸으로 수정하면서 검사할 목록에다가 "차상 시험"이라고 적어놓고는 미처 검사하지는
		못하였다. 그래서 버그를 찾지 못하고 내보내다 보니 조금 상황이 이상...
		수정.
	2. HVAC adpk 추가된 부분 수정
	3. DU에서...
		1) 화재 경보기가 통신으로 수정되어 마스터를 표시할 요량으로 동그라미를 하나 붙였
			는데 그게 뭐냐 하길래 안보이도록 수정.
		2) 화재 경보기 다이얼로그에서 3회 연속 누르는 단추의 인터벌을 2초에서 5초로 수정.
		3) 방송 표시기 마스터 M9를 M5로 수정
		4) 고장 기록 화면에서 "T0-T1"을 "T1-T2"라고 수정 요구가 있지만 "C0"가 있어 "T0-T5"로 수정

20/11/16
	1. TUDIB_TRSF를 A접점(고장)으로 수정.
	2. ECU 통신 디바운스를 20회로 수정.

20/11/23	- TS ver.	2.66LINEDEV
	가. 어떠한 이유로 그러했는지는 모르나 FPGA 내 CRC 검사 기능이 또 빠져버렸다.
		oct측의 실수로 인한 것이었으니 어제 휴일 오송에 내려가서 복원하였다 했으니
		나중에 그 연유를 확인해 볼밖에...
	1. 장치 SD 고장 비트 디바운스를 3회로 하고 있는데 FDU는 6회로 늘린다.

20/11/24	- TS ver.	2.65
	1. TUDIB_DIR & !TUDIB_DIAPDC 조건이 3초 이상 유지될 때만 trouble 882가 발생되도록 수정.

20/12/07
	1. RTD 통신 디바운스 10회로 증가.
	2. RTD 초기 기동 시간(통신을 검사하지 않는 시간)을 0초에서 10초로 수정.
	3. 장치 통신 디바운스 20회를 30회로 수정.
	4. CMK ON Wait 시간을 6초에서 10초로 수정.
	//5. CMSB 기동 지연 시간 (SDR TEXT3)을 0으로 수정.

20/12/21
	1. ATO 통신 시간을 100ms에서 500ms로 수정.

21/01/04
	1. 109 속도 불일치 원인을 5%에서 10Km/h로 수정.

21/02/17
	1. 방송 표시기 SD 중에서 객차 길이를 넘어서는 ampf 비트가 1로 되기도 한다.
	객차 길이를 넘어서는 비트는 무시하도록 수정.

21/02/18
	1. PIS 통신을 통해 표현되는 고장을 20년 2월 18일 실행하지 않도록 하였는데(고장이 너무 빈번히 떠서...)
	딱 일년이 지난 오늘 실행하도록 수정하였다.
	2. WAIT_CMKON이 200칸에선 10초, 24칸에선 15초로 수정.
	3. RTD 통신 디바운스를 24칸에선 20번으로 수정, 200칸에선 10번.
	4. RTD warmup 시간을 30초에서 50초로 늘이는데 이것은 초기 상태에서 실행하는 코드여서
	GetDeviceExFromRecip()를 쓸 수가 없으므로 200칸에도 그대로 적용된다.

21/02/22
	1. ModifyDtb() 실행 전에 c_convention.wSeq를 바꾸면 ModifyDtb() 도중에 Spread()를 통해
	broadcast가 나갈 수 있다. 그러면 세그먼트 폴트가 날 수도 있으므로 이후에 바꾼다.

21/05/10
	1. 10, 12번 고장 코드를 생성하는 부분에서 ProperID를 사용하는 것은 맞으나 F2C로서 객차 번호를 찾으면
		0호차도 늘 9호차로 나온다. P2C 추가 하여 수정.

21/05/17
	1. 중고장이 연속으로 발생하였는데도 고장 조치 화면은 그에 맞지 않는다.
	원인 1) 연속된 중고장과 동시에 경고장이나 그외가 뜨면 현재의 코드에서는 그게 중고장이든 경고장이든
			최근의 것을 가져와 DU에 보내고 그것이 중고장이면 고장 조치 화면을 띄우게하고 경고장이면
			그렇게 하지 않는다. 즉 중고장이 쌓이고 연달아 경고장이 뜨면 TCMS는 최근의 경고장만 표시
			하게되고 그것이 중고장이 아니므로 고장 조치 화면을 띄우려고 하지않는다.
			결국 그 마지막 경고장이 소거되어야 다음의 중고장을 가져오게 되고 그에 따라 고장 조치 화면을
			띄우게된다.
			- GetRecentTrouble()에서 증고장을 먼저 가져와 중고장이 있으면 고장 조치를 띄우고
			중고장이 없으면 경고장부터 검색한다. 중고장은 곧바로 감춤으로 됨으로 결국 0.1초의 오차가
			날 수도 있다.
		2) 현재 DU 스크립트에서는 이전 고장과 지금 고장을 단지 고장 코드만으로서 비교하므로 중고장 표현이나
			고장 조치 화면 수에서 차이가 날 수있다.
			- 스크립트를 수정하여 고장 객차 번호도 비교하게 한다.
		- 이것은 2호선-200칸/24칸에서도 수정이 되어야 하는 부분이다.

21/06/14
	1. PA, PIU warmup 시간을 2분으로 늘인다.
	2. HCR이 인가되어도 ENCF는 일정 시간(3초)정도 지난 후 감시한다.

21/06/29
	1. 고장 코드 721, 838이 소거 시간이 뜨지 않던 버그 수정

21/06/30	- TS ver.	2.66
	1. pa sdr에 muti buzzer clear(MBC) 비트 추가.
	2. 코드 840~844를 이벤트로 수정.
	3. 화재 다이얼로그에 멀티 버저 취소 단추 추가.
	4. V3F PDT 시험에서 P입력이 들어오지 않으므로 NOT B를 인지하도록 하였는데
		B1에서 C로 들어갈 때 B입력은 바로 떨어지나 PWM은 반응이 늦어 NOT B에 PWM을 인식하는 경우가 있어
		NOT B에 PWM P1 상태가 2초이상 유지되어야 시험을 시작하도록 수정.
	5. EB source 감시를 2초동안 하여 소스가 없으면 궤도이탈을 나타내도록 하였으나 MRPS 입력은 2초를 넘어가는
		경우도 있다하니 10초로 수정.
	6. fdu sda's fire detect는 CUniv에서 하고 있으므로 CLide-CheckFdu()에서는 하지 않도록 수정.

21/07/06
	1. 화재 다이얼로그에서 "멀티 버저 취소" 단추를 추가하고 방송 표시기에 이를 전달한다.

21/07/20
	1. 차상 시험 냉방, 난방에서 시험 대기 시간이 길다보니 DU 페이지 해당 화면상에 시험 진행 과정을 넣었다.
	2. ATO 통신 고장이 자주 발생하여 지켜보니 SendAto()에서 네 가지 조건 중 HCR 입력이 빠져 실행하지 않고 있었다.
		else 문에서 실행하는 ClearAtoFlap()을 차단하고 통신 시퀀스 카운터도 별도로 변수를 두어 증가한다.
	3. CUDIB_CMSBF가 추가되므로 고장 코드 206 추가.

21/07/28
	1, 고장 코드 200, 352, 359~361, 368~371을 중고장으로 수정
	2, 고장 코드 840~844까지를 이벤트로 수정

21/08/03
	1, ECU 전송 주기가 100ms로 되어있는데...
		아마 작년에 CMSB를 ECU라인에서 멀티드롭한다는 얘기가 나와서 그리된 듯 하다.
		원래대로 50ms로 수정.

21/08/05
	1. 측정을 위해 HCR을 100ms 단위로 포집하도록 수정. 후에 복구할 것.
	2. 24칸 소스를 200칸 소스로서 작성하여 200칸과 24칸의 소스를 동일하게 하려 했으나
		24칸만 업뎃하다보니 200칸에 적용하기에는 빠진 부분이 있어 보충함.

21/08/06
	1. 24칸에서는 객차의 FD입력이 없으므로 마스터가 통신으로 전송하면 각 객차가 이를 참조하여 HVAC로 전송하도록 수정.
	2. HVAC의 req.b.head에 선두차면 무조건 1을 대입하였으나 시행청의 요구 사항이 있어 선두차 HCR 입력을 대입하도록 수정.

21/08/07~09	- MM ver.	2.31
			- TS ver.	2.68
	* 3호선 작업 중...
	1. ISFREEZE에서 '*'가 아니고 '&'임
	2. mm's CTidy GetLatestLogbookBlock()함수에서 디렉토리는 현재 디렉토리 전의 디렉토리로 넘어가는데
		파일은 전의 파일을 찾지못하고 현재 파일로만 4번 반복되던 것을 수정.
	3. CSteer에서 속도 0 감지 때 4대의 TC가 있다고 보고 소트해서 참조하던 것이 만일 통신 불량으로 마스터 한대만
		동작될 때는 소트해서 2번 째로 항목이라도 0이 되기때문에 속절없이 항목은 0이 된다. 수정.
